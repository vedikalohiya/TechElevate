<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Professional Resume Builder - TechElevate</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <style>
        :root {
            /* Default Theme - Purple */
            --primary-color: #667eea;
            --primary-dark: #764ba2;
            --accent-color: #667eea;
            --accent-light: #e0e7ff;
        }

        /* Color Themes */
        body.theme-purple { --primary-color: #667eea; --primary-dark: #764ba2; --accent-color: #667eea; --accent-light: #e0e7ff; }
        body.theme-blue { --primary-color: #3b82f6; --primary-dark: #1e40af; --accent-color: #3b82f6; --accent-light: #dbeafe; }
        body.theme-green { --primary-color: #10b981; --primary-dark: #059669; --accent-color: #10b981; --accent-light: #d1fae5; }
        body.theme-orange { --primary-color: #f59e0b; --primary-dark: #d97706; --accent-color: #f59e0b; --accent-light: #fef3c7; }
        body.theme-red { --primary-color: #ef4444; --primary-dark: #dc2626; --accent-color: #ef4444; --accent-light: #fee2e2; }
        body.theme-teal { --primary-color: #14b8a6; --primary-dark: #0d9488; --accent-color: #14b8a6; --accent-light: #ccfbf1; }
        body.theme-indigo { --primary-color: #6366f1; --primary-dark: #4f46e5; --accent-color: #6366f1; --accent-light: #e0e7ff; }
        body.theme-pink { --primary-color: #ec4899; --primary-dark: #db2777; --accent-color: #ec4899; --accent-light: #fce7f3; }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, Arial, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: #1e293b;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: background 0.5s ease;
        }

        .wrapper {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .header-section {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header-section h1 {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            letter-spacing: -1px;
        }

        .header-section .subtitle {
            font-size: 18px;
            opacity: 0.95;
            font-weight: 400;
        }

        .template-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 25px auto;
            padding: 0 20px;
        }

        .template-option {
            padding: 20px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .template-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, transparent, white, transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .template-option:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .template-option:hover::before {
            opacity: 1;
        }

        .template-option.active {
            background: white;
            color: #667eea;
            border-color: white;
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.3);
        }

        .template-option.active::before {
            opacity: 1;
            background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
        }

        .template-option i {
            display: block;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .template-option .template-name {
            display: block;
            font-size: 15px;
            margin-bottom: 5px;
        }

        .template-option .template-desc {
            display: block;
            font-size: 11px;
            opacity: 0.8;
            font-weight: 400;
        }

        .layout {
            display: grid;
            grid-template-columns: 1fr minmax(400px, 600px);
            gap: 30px;
            align-items: start;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.2);
        }

        .form-section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px dashed transparent;
            transition: all 0.3s ease;
            cursor: move;
            position: relative;
        }

        .form-section:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .form-section.dragging {
            opacity: 0.5;
            border-color: #667eea;
            transform: scale(0.98);
        }

        .form-section.drag-over {
            border-color: #667eea;
            background: #e0e7ff;
        }

        .form-section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .form-section-title {
            font-size: 18px;
            font-weight: 700;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .form-section-title i {
            font-size: 20px;
        }

        .section-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .section-toggle-btn,
        .section-delete-btn,
        .drag-handle {
            background: white;
            border: 1px solid #e2e8f0;
            color: #475569;
            width: 32px;
            height: 32px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .section-toggle-btn:hover,
        .drag-handle:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .section-delete-btn:hover {
            background: #fee2e2;
            border-color: #fecaca;
            color: #dc2626;
        }

        .drag-handle {
            cursor: move;
        }

        .drag-handle:active {
            cursor: grabbing;
        }

        .form-section.collapsed .form-section-content {
            display: none;
        }

        label {
            display: block;
            margin-top: 12px;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            color: #475569;
        }

        input[type=text],
        input[type=email],
        input[type=tel],
        textarea,
        select {
            width: 100%;
            padding: 14px 16px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s ease;
            background: #f8fafc;
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .row {
            display: flex;
            gap: 15px;
        }

        .small {
            flex: 1;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 14px 28px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            margin-top: 12px;
            font-weight: 600;
            font-size: 15px;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .btn-outline {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            box-shadow: none;
        }

        .btn-outline:hover {
            background: #667eea;
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .muted {
            color: #64748b;
            font-size: 14px;
        }

        .preview {
            padding: 0;
            background: white;
            border-radius: 20px;
            min-height: 600px;
            max-height: 85vh;
            overflow: auto;
            position: sticky;
            top: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }

        .preview::-webkit-scrollbar {
            width: 8px;
        }

        .preview::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }

        .preview::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        .preview::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .resume {
            max-width: 100%;
            margin: 0 auto;
            box-sizing: border-box;
        }

        .paper {
            padding: 40px;
            background: #fff;
            width: 100%;
            box-sizing: border-box;
            min-height: 500px;
        }

        /* ========== TEMPLATE STYLES ========== */
        
        /* Modern - Bold with bottom border */
        .paper.modern .r-header {
            border-bottom: 4px solid #667eea;
            padding-bottom: 20px;
            margin-bottom: 25px;
        }

        .paper.modern .section-title {
            color: #667eea;
            border-bottom: 2px solid #667eea;
        }

        .paper.modern .chip {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Classic - Traditional centered */
        .paper.classic .r-header {
            text-align: center;
            border-bottom: 2px solid #1e293b;
            padding-bottom: 20px;
            margin-bottom: 25px;
            flex-direction: column;
            align-items: center;
        }

        .paper.classic .r-contact {
            text-align: center;
            margin-top: 10px;
        }

        .paper.classic .r-name {
            color: #0f172a;
        }

        .paper.classic .r-title {
            color: #475569;
            font-style: italic;
        }

        .paper.classic .section-title {
            text-align: center;
            color: #0f172a;
            border-bottom: 1px solid #cbd5e1;
        }

        .paper.classic .chip {
            background: #e2e8f0;
            color: #1e293b;
        }

        /* Minimal - Clean with side accent */
        .paper.minimal .r-header {
            border-left: 5px solid #667eea;
            padding-left: 20px;
            margin-bottom: 25px;
        }

        .paper.minimal .section-title {
            border-bottom: none;
            border-left: 4px solid #667eea;
            padding-left: 15px;
            color: #1e293b;
        }

        .paper.minimal .chip {
            background: transparent;
            border: 2px solid #667eea;
            color: #667eea;
        }

        /* Creative - Two-column layout */
        .paper.creative {
            display: grid;
            grid-template-columns: 35% 1fr;
            gap: 30px;
            padding: 0;
        }

        .paper.creative .sidebar {
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            padding: 40px 25px;
            color: white;
        }

        .paper.creative .main-content {
            padding: 40px 30px 40px 0;
        }

        .paper.creative .r-header {
            flex-direction: column;
            margin-bottom: 30px;
        }

        .paper.creative .r-name {
            color: white;
            font-size: 28px;
        }

        .paper.creative .r-title {
            color: rgba(255, 255, 255, 0.9);
        }

        .paper.creative .r-contact {
            text-align: left;
            color: rgba(255, 255, 255, 0.95);
            margin-top: 20px;
        }

        .paper.creative .r-contact i {
            color: white;
        }

        .paper.creative .section-title {
            color: white;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
        }

        .paper.creative .sidebar .section-title {
            font-size: 16px;
        }

        .paper.creative .chip {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .paper.creative .main-content .section-title {
            color: #667eea;
            border-bottom: 2px solid #667eea;
        }

        /* Professional - Corporate style */
        .paper.professional {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }

        .paper.professional .r-header {
            background: white;
            padding: 30px;
            margin: -40px -40px 30px -40px;
            border-bottom: 3px solid #0f172a;
        }

        .paper.professional .r-name {
            color: #0f172a;
            font-family: 'Playfair Display', serif;
        }

        .paper.professional .r-title {
            color: #475569;
            font-weight: 500;
        }

        .paper.professional .section-title {
            background: #0f172a;
            color: white;
            padding: 8px 15px;
            margin-left: -40px;
            margin-right: -40px;
            border: none;
        }

        .paper.professional .chip {
            background: #0f172a;
            color: white;
        }

        /* Elegant - Sophisticated serif */
        .paper.elegant .r-name {
            font-family: 'Playfair Display', serif;
            font-size: 36px;
            color: #4a5568;
        }

        .paper.elegant .r-title {
            font-family: 'Playfair Display', serif;
            color: #718096;
            font-style: italic;
        }

        .paper.elegant .r-header {
            border-bottom: 1px solid #cbd5e1;
            padding-bottom: 25px;
        }

        .paper.elegant .section-title {
            font-family: 'Playfair Display', serif;
            color: #4a5568;
            border-bottom: 1px solid #cbd5e1;
            font-size: 22px;
            letter-spacing: 0;
            text-transform: none;
        }

        .paper.elegant .chip {
            background: #e2e8f0;
            color: #4a5568;
            font-weight: 500;
        }

        /* Bold - High contrast */
        .paper.bold .r-header {
            background: #0f172a;
            color: white;
            padding: 30px;
            margin: -40px -40px 30px -40px;
        }

        .paper.bold .r-name {
            color: white;
            font-size: 38px;
        }

        .paper.bold .r-title {
            color: #fbbf24;
            font-size: 20px;
        }

        .paper.bold .r-contact {
            color: rgba(255, 255, 255, 0.9);
        }

        .paper.bold .r-contact i {
            color: #fbbf24;
        }

        .paper.bold .section-title {
            background: linear-gradient(90deg, #0f172a 0%, #1e293b 100%);
            color: white;
            padding: 10px 15px;
            margin-left: -40px;
            margin-right: -40px;
            border: none;
        }

        .paper.bold .chip {
            background: #0f172a;
            color: #fbbf24;
        }

        /* Compact - Space-efficient */
        .paper.compact {
            padding: 25px;
            font-size: 13px;
        }

        .paper.compact .r-name {
            font-size: 24px;
        }

        .paper.compact .r-title {
            font-size: 15px;
        }

        .paper.compact .section-title {
            font-size: 16px;
            margin-top: 15px;
            margin-bottom: 10px;
            padding-bottom: 5px;
        }

        .paper.compact .section {
            margin-top: 15px;
        }

        .paper.compact .chip {
            padding: 4px 10px;
            font-size: 11px;
            margin: 4px 4px 0 0;
        }

        .r-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 20px;
        }

        .r-name {
            font-size: 32px;
            font-weight: 800;
            letter-spacing: -0.5px;
            color: #1e293b;
            margin-bottom: 5px;
        }

        .r-title {
            color: #667eea;
            font-weight: 600;
            font-size: 18px;
            margin-top: 5px;
        }

        .r-contact {
            text-align: right;
            font-size: 14px;
            color: #475569;
            line-height: 1.8;
        }

        .r-contact i {
            margin-right: 6px;
            color: #667eea;
            width: 16px;
        }

        .section {
            margin-top: 25px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 8px;
        }

        .chip {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            margin: 6px 6px 0 0;
            font-weight: 600;
            font-size: 13px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            transition: transform 0.2s ease;
        }

        .chip:hover {
            transform: translateY(-2px);
        }

        .controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeInUp 0.5s ease both;
        }

        .add-link {
            color: var(--primary-color);
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: #f1f5f9;
        }

        .add-link:hover {
            background: #e2e8f0;
            color: #764ba2;
        }

        .add-link i {
            font-size: 16px;
        }

        .exp-item, .edu-item {
            margin-top: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
        }

        .delete-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 8px;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: #dc2626;
        }

        /* AI Suggestions Panel */
        .ai-suggest-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            margin-top: 8px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
        }

        .ai-suggest-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(240, 147, 251, 0.4);
        }

        .ai-suggest-btn i {
            animation: sparkle 2s infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .suggestions-panel {
            position: fixed;
            right: -450px;
            top: 0;
            width: 450px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 30px rgba(0,0,0,0.3);
            transition: right 0.4s ease;
            z-index: 10000;
            overflow-y: auto;
        }

        .suggestions-panel.active {
            right: 0;
        }

        .suggestions-header {
            padding: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .suggestions-header h3 {
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-suggestions {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .close-suggestions:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }

        .suggestions-content {
            padding: 25px;
        }

        .suggestion-category {
            margin-bottom: 30px;
        }

        .suggestion-category h4 {
            color: #667eea;
            font-size: 16px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .suggestion-item {
            background: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 3px solid #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .suggestion-item:hover {
            background: #e0e7ff;
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .suggestion-text {
            font-size: 14px;
            line-height: 1.6;
            color: #475569;
        }

        .suggestion-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-top: 8px;
        }

        .power-words {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .power-word {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .power-word:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .ai-loading {
            text-align: center;
            padding: 30px;
            color: #667eea;
        }

        .ai-loading i {
            font-size: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .field-helper {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-left: 10px;
        }

        /* ATS Score Checker */
        .ats-score-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 380px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
            z-index: 9998;
            transform: translateY(calc(100% + 40px));
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .ats-score-panel.show {
            transform: translateY(0);
        }

        .ats-score-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
            transition: all 0.3s ease;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse-ats 2s infinite;
        }

        @keyframes pulse-ats {
            0%, 100% { box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4); }
            50% { box-shadow: 0 10px 40px rgba(16, 185, 129, 0.6), 0 0 0 10px rgba(16, 185, 129, 0.1); }
        }

        .ats-score-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(16, 185, 129, 0.5);
        }

        .ats-score-toggle.active {
            bottom: 430px;
        }

        .ats-header {
            padding: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ats-header h3 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ats-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .ats-close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .ats-content {
            padding: 20px;
            max-height: 350px;
            overflow-y: auto;
        }

        .ats-content::-webkit-scrollbar {
            width: 6px;
        }

        .ats-content::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        .ats-content::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        .ats-score-display {
            text-align: center;
            margin-bottom: 20px;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            margin: 0 auto 15px;
            position: relative;
        }

        .score-circle svg {
            transform: rotate(-90deg);
        }

        .score-circle circle {
            fill: none;
            stroke-width: 10;
        }

        .score-circle .circle-bg {
            stroke: #e2e8f0;
        }

        .score-circle .circle-progress {
            stroke-linecap: round;
            transition: stroke-dashoffset 1s ease, stroke 0.5s ease;
        }

        .score-circle .score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 32px;
            font-weight: 800;
            color: #1e293b;
        }

        .score-label {
            font-size: 16px;
            font-weight: 600;
            color: #475569;
            margin-bottom: 5px;
        }

        .score-rating {
            font-size: 14px;
            padding: 6px 16px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 600;
        }

        .score-rating.excellent {
            background: #d1fae5;
            color: #065f46;
        }

        .score-rating.good {
            background: #dbeafe;
            color: #1e40af;
        }

        .score-rating.fair {
            background: #fef3c7;
            color: #92400e;
        }

        .score-rating.poor {
            background: #fee2e2;
            color: #991b1b;
        }

        .ats-metrics {
            margin-top: 20px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: #f8fafc;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .metric-label {
            font-size: 13px;
            color: #475569;
            font-weight: 600;
        }

        .metric-value {
            font-size: 13px;
            font-weight: 700;
        }

        .metric-value.good {
            color: #10b981;
        }

        .metric-value.warning {
            color: #f59e0b;
        }

        .metric-value.error {
            color: #ef4444;
        }

        .ats-suggestions {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }

        .ats-suggestions h4 {
            font-size: 14px;
            color: #1e293b;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .suggestion-list {
            list-style: none;
        }

        .suggestion-list li {
            padding: 10px;
            background: #fef3c7;
            border-left: 3px solid #f59e0b;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 12px;
            color: #78350f;
            line-height: 1.5;
        }

        .suggestion-list li i {
            margin-right: 6px;
            color: #f59e0b;
        }

        @media (max-width: 640px) {
            .ats-score-panel {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }

            .ats-score-toggle.active {
                bottom: 450px;
            }
        }

        @media (max-width: 1024px) {
            .layout {
                grid-template-columns: 1fr;
            }

            .preview {
                position: relative;
                top: 0;
                order: 2;
                max-height: 600px;
            }

            .header-section h1 {
                font-size: 36px;
            }

            .r-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .r-contact {
                text-align: left;
                margin-top: 10px;
            }

            .paper {
                padding: 30px;
            }
        }

        @media (max-width: 640px) {
            .wrapper {
                padding: 20px 10px;
            }

            .header-section h1 {
                font-size: 28px;
            }

            .header-section .subtitle {
                font-size: 16px;
            }

            .card {
                padding: 20px;
            }

            .r-name {
                font-size: 24px;
            }

            .r-title {
                font-size: 16px;
            }

            .row {
                flex-direction: column;
                gap: 0;
            }

            .controls {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .template-selector {
                flex-direction: column;
            }

            .template-option {
                width: 100%;
            }

            .suggestions-panel {
                width: 100%;
                right: -100%;
            }

            .suggestions-panel.active {
                right: 0;
            }
        }

        /* Custom Section Modal */
        .custom-section-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 10001;
            align-items: center;
            justify-content: center;
        }

        .custom-section-modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.3);
        }

        .modal-content h3 {
            color: #1e293b;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .section-type-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .section-type-option {
            padding: 20px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .section-type-option:hover {
            background: #e0e7ff;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .section-type-option.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .section-type-option i {
            font-size: 28px;
            display: block;
            margin-bottom: 8px;
        }

        .section-type-option span {
            font-weight: 600;
            font-size: 14px;
        }

        .add-section-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .add-section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        .add-section-trigger {
            background: white;
            border: 2px dashed #cbd5e1;
            color: #667eea;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            margin: 20px 0;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .add-section-trigger:hover {
            border-color: var(--primary-color);
            background: #f8fafc;
        }

        .add-section-trigger i {
            font-size: 20px;
        }

        /* Color Theme Selector */
        .color-theme-selector {
            background: white;
            padding: 25px;
            border-radius: 16px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .theme-selector-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #1e293b;
            font-weight: 700;
            font-size: 16px;
        }

        .theme-selector-header i {
            color: var(--primary-color);
            font-size: 20px;
        }

        .theme-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        .theme-option {
            position: relative;
            height: 50px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .theme-option::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--theme-primary) 0%, var(--theme-dark) 100%);
            z-index: 1;
        }

        .theme-option-check {
            position: relative;
            z-index: 2;
            color: white;
            font-size: 20px;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s ease;
        }

        .theme-option.active {
            border-color: #1e293b;
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .theme-option.active .theme-option-check {
            opacity: 1;
            transform: scale(1);
        }

        .theme-option:hover {
            transform: scale(1.08);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        .theme-option[data-theme="purple"] { --theme-primary: #667eea; --theme-dark: #764ba2; }
        .theme-option[data-theme="blue"] { --theme-primary: #3b82f6; --theme-dark: #1e40af; }
        .theme-option[data-theme="green"] { --theme-primary: #10b981; --theme-dark: #059669; }
        .theme-option[data-theme="orange"] { --theme-primary: #f59e0b; --theme-dark: #d97706; }
        .theme-option[data-theme="red"] { --theme-primary: #ef4444; --theme-dark: #dc2626; }
        .theme-option[data-theme="teal"] { --theme-primary: #14b8a6; --theme-dark: #0d9488; }
        .theme-option[data-theme="indigo"] { --theme-primary: #6366f1; --theme-dark: #4f46e5; }
        .theme-option[data-theme="pink"] { --theme-primary: #ec4899; --theme-dark: #db2777; }

        .theme-name {
            text-align: center;
            font-size: 11px;
            color: #64748b;
            margin-top: 8px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .theme-options {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }
            .theme-option {
                height: 45px;
            }
        }

        /* LinkedIn Import */
        .linkedin-import-btn {
            background: linear-gradient(135deg, #0077b5 0%, #005885 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 119, 181, 0.3);
        }

        .linkedin-import-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 119, 181, 0.4);
        }

        .linkedin-import-btn i {
            font-size: 20px;
        }

        .linkedin-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10002;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .linkedin-modal.active {
            display: flex;
        }

        .linkedin-modal-content {
            background: white;
            border-radius: 20px;
            padding: 35px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; transform: translateX(100px); }
        }

        .linkedin-modal-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .linkedin-modal-header i {
            font-size: 32px;
            color: #0077b5;
        }

        .linkedin-modal-header h3 {
            color: #1e293b;
            font-size: 24px;
            margin: 0;
        }

        .linkedin-modal-body {
            margin-bottom: 25px;
        }

        .import-option {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .import-option:hover {
            background: #e0f2fe;
            border-color: #0077b5;
            transform: translateX(5px);
        }

        .import-option i {
            font-size: 24px;
            color: #0077b5;
            width: 40px;
            text-align: center;
        }

        .import-option-content h4 {
            margin: 0 0 5px 0;
            color: #1e293b;
            font-size: 16px;
        }

        .import-option-content p {
            margin: 0;
            color: #64748b;
            font-size: 13px;
        }

        .linkedin-paste-area {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f1f5f9;
            border-radius: 12px;
            border: 2px dashed #cbd5e1;
        }

        .linkedin-paste-area.active {
            display: block;
        }

        .linkedin-paste-area textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            resize: vertical;
        }

        .linkedin-paste-area textarea:focus {
            border-color: #0077b5;
            outline: none;
        }

        .import-instructions {
            background: #dbeafe;
            border-left: 4px solid #0077b5;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .import-instructions h4 {
            margin: 0 0 10px 0;
            color: #075985;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .import-instructions ol {
            margin: 0;
            padding-left: 20px;
            color: #0c4a6e;
            font-size: 13px;
            line-height: 1.8;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .modal-actions button {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-import {
            background: linear-gradient(135deg, #0077b5 0%, #005885 100%);
            color: white;
            border: none;
        }

        .btn-import:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 119, 181, 0.3);
        }

        .btn-cancel {
            background: white;
            color: #64748b;
            border: 2px solid #e2e8f0;
        }

        .btn-cancel:hover {
            background: #f8fafc;
            border-color: #cbd5e1;
        }

        /* Resume Management */
        .resume-management-btn {
            position: fixed;
            left: 20px;
            bottom: 20px;
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4);
            transition: all 0.3s ease;
            z-index: 9998;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
        }

        .resume-management-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(139, 92, 246, 0.5);
        }

        .resume-management-btn i {
            font-size: 18px;
        }

        .resume-management-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10003;
            align-items: center;
            justify-content: center;
        }

        .resume-management-modal.active {
            display: flex;
        }

        .resume-management-content {
            background: white;
            border-radius: 20px;
            padding: 35px;
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.3);
        }

        .resume-management-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .resume-management-header h3 {
            color: #1e293b;
            font-size: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 0;
        }

        .resume-management-header h3 i {
            color: #8b5cf6;
            font-size: 28px;
        }

        .close-resume-modal {
            background: #f1f5f9;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: #64748b;
            font-size: 18px;
        }

        .close-resume-modal:hover {
            background: #e2e8f0;
            color: #1e293b;
        }

        .save-current-resume {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .save-current-resume:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4);
        }

        .resume-list {
            display: grid;
            gap: 15px;
        }

        .resume-item {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .resume-item:hover {
            border-color: #8b5cf6;
            background: #faf5ff;
            transform: translateX(5px);
        }

        .resume-item.active {
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
            border-color: #8b5cf6;
        }

        .resume-item-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .resume-item-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .resume-item-title i {
            color: #8b5cf6;
        }

        .resume-item-actions {
            display: flex;
            gap: 8px;
        }

        .resume-action-btn {
            background: white;
            border: 2px solid #e2e8f0;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            color: #64748b;
        }

        .resume-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .resume-action-btn.load:hover {
            background: #dbeafe;
            border-color: #3b82f6;
            color: #3b82f6;
        }

        .resume-action-btn.rename:hover {
            background: #fef3c7;
            border-color: #f59e0b;
            color: #f59e0b;
        }

        .resume-action-btn.delete:hover {
            background: #fee2e2;
            border-color: #ef4444;
            color: #ef4444;
        }

        .resume-item-info {
            display: flex;
            gap: 20px;
            color: #64748b;
            font-size: 13px;
        }

        .resume-item-info span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .resume-item-info i {
            font-size: 12px;
        }

        .no-resumes {
            text-align: center;
            padding: 40px 20px;
            color: #94a3b8;
        }

        .no-resumes i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .no-resumes p {
            font-size: 15px;
        }

        .resume-count-badge {
            background: #8b5cf6;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
        }

        /* Cover Letter Generator */
        .cover-letter-btn {
            position: fixed;
            right: 20px;
            bottom: 180px;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4);
            transition: all 0.3s ease;
            z-index: 9998;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cover-letter-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(245, 158, 11, 0.5);
        }

        .cover-letter-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10004;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
        }

        .cover-letter-modal.active {
            display: flex;
        }

        .cover-letter-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 900px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.3);
            margin: 20px;
        }

        .cover-letter-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #f59e0b;
        }

        .cover-letter-header h2 {
            color: #1e293b;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 0;
        }

        .cover-letter-header h2 i {
            color: #f59e0b;
            font-size: 32px;
        }

        .cover-letter-form {
            display: grid;
            gap: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 700;
            color: #1e293b;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group label i {
            color: #f59e0b;
        }

        .form-group input,
        .form-group textarea {
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            border-color: #f59e0b;
            outline: none;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        .generate-cover-btn {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            border: none;
            padding: 18px 30px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .generate-cover-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.4);
        }

        .cover-letter-preview {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 40px;
            margin-top: 30px;
            display: none;
            font-family: 'Times New Roman', serif;
            line-height: 1.8;
            color: #1e293b;
        }

        .cover-letter-preview.active {
            display: block;
        }

        .cover-letter-preview h3 {
            color: #f59e0b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Inter', sans-serif;
        }

        .cover-letter-text {
            white-space: pre-wrap;
            font-size: 15px;
        }

        .cover-letter-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .cover-letter-actions button {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-copy-cover {
            background: #3b82f6;
            color: white;
            border: none;
        }

        .btn-copy-cover:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }

        .btn-download-cover {
            background: #10b981;
            color: white;
            border: none;
        }

        .btn-download-cover:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .ai-enhance-btn {
            background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            margin-top: 5px;
        }

        .ai-enhance-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4);
        }

        .template-select {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 10px;
        }

        .template-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .template-card:hover {
            border-color: #f59e0b;
            background: #fef3c7;
            transform: translateY(-2px);
        }

        .template-card.selected {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-color: #f59e0b;
        }

        .template-card i {
            font-size: 28px;
            color: #f59e0b;
            margin-bottom: 8px;
        }

        .template-card span {
            display: block;
            font-weight: 600;
            color: #1e293b;
            font-size: 13px;
        }

        .section-order-info {
            background: #e0f2fe;
            border-left: 4px solid #0284c7;
            padding: 12px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 13px;
            color: #075985;
        }

        .section-order-info i {
            margin-right: 8px;
        }

        .section-content {
            padding: 15px;
        }

        .form-section.collapsed .section-content,
        .form-section.collapsed #experiences,
        .form-section.collapsed #educations,
        .form-section.collapsed #skills,
        .form-section.collapsed label,
        .form-section.collapsed input#skillInput {
            display: none;
        }

        .custom-item {
            margin-top: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
        }

        .custom-title {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .custom-title:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .custom-desc {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            min-height: 80px;
            resize: vertical;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .custom-desc:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .delete-btn-section {
            background: #ef4444 !important;
        }

        .delete-btn-section:hover {
            background: #dc2626 !important;
        }

        .navbar {
        padding: 15px 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #000000;
        position: sticky;
        top: 0;
        z-index: 1000;
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
      }

      .glass {
        background: rgba(10, 38, 71, 0.6);
        border-radius: 0;
      }

      .logo {
        font-size: 1.8rem;
        font-weight: bold;
      }

      .nav-links {
        list-style: none;
        display: flex;
        gap: 25px;
      }

      .nav-links li a {
        text-decoration: none;
        color: #000000;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        padding: 6px 12px;
        border-radius: 8px;
      }

      .nav-links li a:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: #005d69;
      }

      .hamburger {
        display: none;
        flex-direction: column;
        cursor: pointer;
        gap: 5px;
      }

      .hamburger span {
        height: 3px;
        width: 25px;
        background-color: #030303;
        border-radius: 5px;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .nav-links {
          display: none;
          flex-direction: column;
          position: absolute;
          top: 65px;
          right: 30px;
          background: rgba(10, 38, 71, 0.95);
          padding: 20px;
          border-radius: 12px;
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .nav-links.active {
          display: flex;
        }

        .hamburger {
          display: flex;
        }
      }
      .large-icon {
        font-size: 1.4rem; /* Try 1.6rem or 2rem if you want bigger */
      }

    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">TechElevate</div>
        <ul class="nav-links" id="navLinks">
            <li>
                <a href="/dashboard"><i class="fa-solid fa-house"></i> Dashboard</a>
            </li>
            <li>
                <a href="/aboutus"><i class="fa-solid fa-info"></i> About Us</a>
            </li>
            <li>
                <a href="/contact"><i class="fa-solid fa-phone"></i> Contact</a>
            </li>
            <li>
                <a href="/profile"><i class="fa-solid fa-user large-icon"></i></a>
            </li>
        </ul>
        <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
    <div class="wrapper">
        <div class="header-section">
            <h1><i class="fas fa-file-alt"></i> Resume Builder</h1>
            <p class="subtitle">Create a professional resume in minutes. Choose your template, fill in your details, and download instantly.</p>
            
            <div class="template-selector">
                <div class="template-option active" data-template="modern">
                    <i class="fas fa-star"></i>
                    <span class="template-name">Modern</span>
                    <span class="template-desc">Bold & contemporary</span>
                </div>
                <div class="template-option" data-template="classic">
                    <i class="fas fa-briefcase"></i>
                    <span class="template-name">Classic</span>
                    <span class="template-desc">Traditional centered</span>
                </div>
                <div class="template-option" data-template="minimal">
                    <i class="fas fa-layer-group"></i>
                    <span class="template-name">Minimal</span>
                    <span class="template-desc">Clean & simple</span>
                </div>
                <div class="template-option" data-template="creative">
                    <i class="fas fa-palette"></i>
                    <span class="template-name">Creative</span>
                    <span class="template-desc">Two-column design</span>
                </div>
                <div class="template-option" data-template="professional">
                    <i class="fas fa-building"></i>
                    <span class="template-name">Professional</span>
                    <span class="template-desc">Corporate style</span>
                </div>
                <div class="template-option" data-template="elegant">
                    <i class="fas fa-gem"></i>
                    <span class="template-name">Elegant</span>
                    <span class="template-desc">Sophisticated serif</span>
                </div>
                <div class="template-option" data-template="bold">
                    <i class="fas fa-fire"></i>
                    <span class="template-name">Bold</span>
                    <span class="template-desc">High contrast</span>
                </div>
                <div class="template-option" data-template="compact">
                    <i class="fas fa-compress"></i>
                    <span class="template-name">Compact</span>
                    <span class="template-desc">Space efficient</span>
                </div>
            </div>

            <!-- Color Theme Selector -->
            <div class="color-theme-selector">
                <div class="theme-selector-header">
                    <i class="fas fa-palette"></i>
                    <span>Choose Your Color Theme</span>
                </div>
                <div class="theme-options">
                    <div class="theme-option active" data-theme="purple" title="Purple">
                        <i class="fas fa-check theme-option-check"></i>
                    </div>
                    <div class="theme-option" data-theme="blue" title="Blue">
                        <i class="fas fa-check theme-option-check"></i>
                    </div>
                    <div class="theme-option" data-theme="green" title="Green">
                        <i class="fas fa-check theme-option-check"></i>
                    </div>
                    <div class="theme-option" data-theme="orange" title="Orange">
                        <i class="fas fa-check theme-option-check"></i>
                    </div>
                    <div class="theme-option" data-theme="red" title="Red">
                        <i class="fas fa-check theme-option-check"></i>
                    </div>
                    <div class="theme-option" data-theme="teal" title="Teal">
                        <i class="fas fa-check theme-option-check"></i>
                    </div>
                    <div class="theme-option" data-theme="indigo" title="Indigo">
                        <i class="fas fa-check theme-option-check"></i>
                    </div>
                    <div class="theme-option" data-theme="pink" title="Pink">
                        <i class="fas fa-check theme-option-check"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Intro modal (first-time users) -->
        <div id="introModal"
            style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:9999; align-items:center; justify-content:center;">
            <div
                style="background:#fff; max-width:720px; width:92%; border-radius:12px; padding:20px; box-shadow:0 10px 40px rgba(0,0,0,0.4); color:#0b2545;">
                <h2 style="margin-top:0;">Welcome to the Resume Builder</h2>
                <p style="color:#5b6b7a;">This tool helps you create a clean, printable resume quickly. Fill the fields
                    on the left and click <strong>Preview</strong> to see the formatted resume. Use <strong>Download /
                        Print</strong> to save a PDF.</p>
                <ul style="color:#5b6b7a;">
                    <li>Click <strong>+ Add experience</strong> or <strong>+ Add education</strong> to add multiple
                        entries.</li>
                    <li>Press Enter in the Skills box to add skill chips.</li>
                    <li>Use <strong>Reset</strong> to clear the form.</li>
                </ul>
                <div style="display:flex; align-items:center; gap:12px; margin-top:12px;">
                    <label style="display:flex; align-items:center; gap:8px; font-size:14px; color:#445;"> <input
                            id="dontShow" type="checkbox"> Don't show again</label>
                    <div style="flex:1"></div>
                    <button class="btn" id="introCloseBtn">Got it  Open builder</button>
                </div>
            </div>
        </div>

        <!-- Help floating button -->
        <button id="helpBtn" title="Builder help"
            style="position:fixed; right:22px; bottom:90px; background:#0b7db1; color:#fff; border:none; padding:10px 12px; border-radius:999px; box-shadow:0 6px 20px rgba(0,0,0,0.2); cursor:pointer; z-index:999;">Help</button>

        <div class="layout">
            <div class="card">
                <!-- LinkedIn Import Button -->
                <button class="linkedin-import-btn" onclick="openLinkedInImport()">
                    <i class="fab fa-linkedin"></i>
                    <span>Import from LinkedIn</span>
                    <i class="fas fa-magic" style="font-size: 16px;"></i>
                </button>

                <div class="form-section">
                    <div class="form-section-title">
                        <i class="fas fa-user"></i> Personal Information
                    </div>
                    <label><i class="fas fa-id-badge"></i> Full Name</label>
                    <input id="name" type="text" placeholder="John Doe" />

                    <label><i class="fas fa-briefcase"></i> Professional Title</label>
                    <input id="title" type="text" placeholder="Full Stack Developer" />

                    <div class="row">
                        <div class="small">
                            <label><i class="fas fa-envelope"></i> Email</label>
                            <input id="email" type="email" placeholder="john.doe@email.com" />
                        </div>
                        <div class="small">
                            <label><i class="fas fa-phone"></i> Phone</label>
                            <input id="phone" type="tel" placeholder="+1 (555) 123-4567" />
                        </div>
                    </div>

                    <div class="row">
                        <div class="small">
                            <label><i class="fas fa-map-marker-alt"></i> Location</label>
                            <input id="location" type="text" placeholder="New York, NY" />
                        </div>
                        <div class="small">
                            <label><i class="fab fa-linkedin"></i> LinkedIn</label>
                            <input id="linkedin" type="text" placeholder="linkedin.com/in/johndoe" />
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">
                        <i class="fas fa-align-left"></i> Professional Summary
                        <div class="field-helper">
                            <button class="ai-suggest-btn" onclick="openAISuggestions('summary')">
                                <i class="fas fa-magic"></i> AI Suggest
                            </button>
                        </div>
                    </div>
                    <textarea id="summary" placeholder="Write a compelling 2-3 sentence summary highlighting your expertise, achievements, and career goals..."></textarea>
                </div>

                <!-- Section Order Info -->
                <div class="section-order-info">
                    <i class="fas fa-info-circle"></i>
                    <strong>Drag & Drop:</strong> Click and drag the <i class="fas fa-grip-vertical"></i> icon to reorder sections. Add custom sections below!
                </div>

                <!-- Add Section Button -->
                <div class="add-section-trigger" onclick="openCustomSectionModal()">
                    <i class="fas fa-plus-square"></i>
                    <span>Add Custom Section</span>
                </div>

                <div class="form-section" draggable="true" data-section-id="experience">
                    <div class="form-section-header">
                        <div class="section-controls">
                            <button class="section-control-btn collapse-btn" onclick="toggleSection(this)" title="Collapse">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <button class="section-control-btn drag-handle" title="Drag to reorder">
                                <i class="fas fa-grip-vertical"></i>
                            </button>
                        </div>
                        <div class="form-section-title">
                            <i class="fas fa-building"></i> Work Experience
                        <div class="field-helper">
                            <button class="ai-suggest-btn" onclick="openAISuggestions('experience')">
                                <i class="fas fa-magic"></i> AI Suggest
                            </button>
                        </div>
                    </div>
                    <div id="experiences">
                        <div class="exp-item">
                            <input class="exp-role" type="text" placeholder="Job Title  Company Name" />
                            <input class="exp-dates" type="text" placeholder="Jan 2020 - Present" />
                            <textarea class="exp-desc" placeholder=" Describe your key achievements and responsibilities&#10; Use bullet points to highlight impact&#10; Quantify results when possible"></textarea>
                            <button class="delete-btn" onclick="this.parentElement.remove()">
                                <i class="fas fa-trash"></i> Remove
                            </button>
                        </div>
                    </div>
                        <div style="margin-top:12px;">
                            <span class="add-link" onclick="addExperience()">
                                <i class="fas fa-plus-circle"></i> Add Experience
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-section" draggable="true" data-section-id="education">
                    <div class="form-section-header">
                        <div class="section-controls">
                            <button class="section-control-btn collapse-btn" onclick="toggleSection(this)" title="Collapse">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <button class="section-control-btn drag-handle" title="Drag to reorder">
                                <i class="fas fa-grip-vertical"></i>
                            </button>
                        </div>
                        <div class="form-section-title">
                            <i class="fas fa-graduation-cap"></i> Education
                    </div>
                    <div id="educations">
                        <div class="edu-item">
                            <input class="edu-role" type="text" placeholder="Degree  Institution Name" />
                            <input class="edu-dates" type="text" placeholder="Graduation Year" />
                            <textarea class="edu-desc" placeholder="GPA, Honors, Relevant Coursework (Optional)"></textarea>
                            <button class="delete-btn" onclick="this.parentElement.remove()">
                                <i class="fas fa-trash"></i> Remove
                            </button>
                        </div>
                    </div>
                        <div style="margin-top:12px;">
                            <span class="add-link" onclick="addEducation()">
                                <i class="fas fa-plus-circle"></i> Add Education
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-section" draggable="true" data-section-id="skills">
                    <div class="form-section-header">
                        <div class="section-controls">
                            <button class="section-control-btn collapse-btn" onclick="toggleSection(this)" title="Collapse">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <button class="section-control-btn drag-handle" title="Drag to reorder">
                                <i class="fas fa-grip-vertical"></i>
                            </button>
                        </div>
                        <div class="form-section-title">
                            <i class="fas fa-tools"></i> Skills
                            <div class="field-helper">
                                <button class="ai-suggest-btn" onclick="openAISuggestions('skills')">
                                    <i class="fas fa-magic"></i> AI Suggest
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="section-content">
                        <label>Type a skill and press Enter</label>
                        <input id="skillInput" type="text" placeholder="e.g., JavaScript, Python, Project Management..." />
                        <div id="skills" style="margin-top:15px"></div>
                    </div>
                </div>

                <div class="controls">
                    <button class="btn" onclick="generateResume()">
                        <i class="fas fa-eye"></i> Preview Resume
                    </button>
                    <button class="btn btn-secondary" onclick="openPrint()">
                        <i class="fas fa-download"></i> Download PDF
                    </button>
                    <button class="btn btn-outline" onclick="saveProgress()">
                        <i class="fas fa-save"></i> Save Progress
                    </button>
                    <button class="btn btn-danger" onclick="resetForm()">
                        <i class="fas fa-redo"></i> Reset All
                    </button>
                </div>
            </div>

            <div class="preview card">
                <div id="previewArea" class="resume" aria-live="polite">
                    <div style="text-align:center;color:#94a3b8;padding:60px 20px;">
                        <i class="fas fa-file-alt" style="font-size:64px;margin-bottom:20px;opacity:0.3;"></i>
                        <h3 style="margin-bottom:10px;">Your Resume Preview</h3>
                        <p>Fill in your details and click "Preview Resume" to see your professional resume here.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Suggestions Panel -->
    <div id="aiSuggestionsPanel" class="suggestions-panel">
        <div class="suggestions-header">
            <h3><i class="fas fa-magic"></i> AI Suggestions</h3>
            <button class="close-suggestions" onclick="closeAISuggestions()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="suggestionsContent" class="suggestions-content">
            <!-- Content will be dynamically loaded -->
        </div>
    </div>

    <!-- Cover Letter Generator Modal -->
    <div class="cover-letter-modal" id="coverLetterModal">
        <div class="cover-letter-content">
            <div class="cover-letter-header">
                <h2>
                    <i class="fas fa-envelope-open-text"></i>
                    Cover Letter Generator
                </h2>
                <button class="close-resume-modal" onclick="closeCoverLetterGenerator()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form class="cover-letter-form" onsubmit="generateCoverLetter(event)">
                <div class="form-group">
                    <label><i class="fas fa-lightbulb"></i> Cover Letter Style</label>
                    <div class="template-select">
                        <div class="template-card selected" data-style="professional" onclick="selectCoverStyle('professional')">
                            <i class="fas fa-briefcase"></i>
                            <span>Professional</span>
                        </div>
                        <div class="template-card" data-style="creative" onclick="selectCoverStyle('creative')">
                            <i class="fas fa-palette"></i>
                            <span>Creative</span>
                        </div>
                        <div class="template-card" data-style="enthusiastic" onclick="selectCoverStyle('enthusiastic')">
                            <i class="fas fa-star"></i>
                            <span>Enthusiastic</span>
                        </div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-building"></i> Company Name *</label>
                        <input type="text" id="coverCompanyName" placeholder="Tech Corp Inc." required />
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-user-tie"></i> Hiring Manager Name</label>
                        <input type="text" id="coverHiringManager" placeholder="John Smith (Optional)" />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-briefcase"></i> Job Title *</label>
                        <input type="text" id="coverJobTitle" placeholder="Senior Software Engineer" required />
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-map-marker-alt"></i> Company Location</label>
                        <input type="text" id="coverCompanyLocation" placeholder="San Francisco, CA" />
                    </div>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-bullseye"></i> Key Skills/Requirements (comma-separated)</label>
                    <input type="text" id="coverKeySkills" placeholder="React, Node.js, Python, Team Leadership" />
                    <button type="button" class="ai-enhance-btn" onclick="extractSkillsFromResume()">
                        <i class="fas fa-magic"></i> Extract from Resume
                    </button>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-trophy"></i> Key Achievements to Highlight</label>
                    <textarea id="coverAchievements" placeholder="Example:\n Led a team of 5 developers in building a high-traffic web application\n Reduced page load time by 40% through optimization\n Implemented CI/CD pipeline improving deployment efficiency"></textarea>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-heart"></i> Why This Company? (Optional)</label>
                    <textarea id="coverWhyCompany" placeholder="What excites you about this company? (e.g., innovative products, company culture, mission)"></textarea>
                </div>

                <button type="submit" class="generate-cover-btn">
                    <i class="fas fa-magic"></i>
                    Generate Cover Letter
                </button>
            </form>

            <div class="cover-letter-preview" id="coverLetterPreview">
                <h3><i class="fas fa-file-alt"></i> Your Cover Letter</h3>
                <div class="cover-letter-text" id="coverLetterText"></div>
                <div class="cover-letter-actions">
                    <button class="btn-copy-cover" onclick="copyCoverLetter()">
                        <i class="fas fa-copy"></i> Copy to Clipboard
                    </button>
                    <button class="btn-download-cover" onclick="downloadCoverLetter()">
                        <i class="fas fa-download"></i> Download as Text
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resume Management Modal -->
    <div class="resume-management-modal" id="resumeManagementModal">
        <div class="resume-management-content">
            <div class="resume-management-header">
                <h3>
                    <i class="fas fa-folder-open"></i>
                    My Resumes
                </h3>
                <button class="close-resume-modal" onclick="closeResumeManagement()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <button class="save-current-resume" onclick="saveNewResume()">
                <i class="fas fa-save"></i>
                Save Current Resume
            </button>

            <div id="resumeListContainer">
                <!-- Resume list will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- LinkedIn Import Modal -->
    <div class="linkedin-modal" id="linkedinModal">
        <div class="linkedin-modal-content">
            <div class="linkedin-modal-header">
                <i class="fab fa-linkedin"></i>
                <h3>Import from LinkedIn</h3>
            </div>
            
            <div class="linkedin-modal-body">
                <div class="import-instructions">
                    <h4><i class="fas fa-info-circle"></i> How to Import:</h4>
                    <ol>
                        <li>Go to your LinkedIn profile page</li>
                        <li>Click "More"  "Save to PDF"</li>
                        <li>Open the PDF and copy all text (Ctrl+A, Ctrl+C)</li>
                        <li>Paste the copied text below</li>
                    </ol>
                </div>

                <div class="import-option" onclick="showPasteArea()">
                    <i class="fas fa-paste"></i>
                    <div class="import-option-content">
                        <h4>Paste LinkedIn Profile Data</h4>
                        <p>Copy your LinkedIn profile text and paste it here</p>
                    </div>
                </div>

                <div class="linkedin-paste-area" id="linkedinPasteArea">
                    <label style="font-weight: 600; color: #1e293b; margin-bottom: 10px; display: block;">
                        <i class="fas fa-clipboard"></i> Paste Your LinkedIn Profile Text:
                    </label>
                    <textarea id="linkedinDataInput" placeholder="Paste your LinkedIn profile data here...&#10;&#10;Example:&#10;John Doe&#10;Software Engineer at Tech Company&#10;San Francisco, CA&#10;john.doe@email.com&#10;&#10;Experience:&#10;Software Engineer - Tech Company (2020-Present)&#10;..."onfocus></textarea>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn-import" onclick="processLinkedInImport()">
                    <i class="fas fa-download"></i> Import Data
                </button>
                <button class="btn-cancel" onclick="closeLinkedInImport()">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Section Modal -->
    <div class="custom-section-modal" id="customSectionModal">
        <div class="modal-content">
            <h3><i class="fas fa-plus-circle"></i> Add Custom Section</h3>
            <p style="color:#64748b; font-size:14px; margin-bottom:20px;">Choose a section type to add to your resume</p>
            
            <div class="section-type-grid">
                <div class="section-type-option" data-section-type="projects">
                    <i class="fas fa-code"></i>
                    <span>Projects</span>
                </div>
                <div class="section-type-option" data-section-type="certifications">
                    <i class="fas fa-certificate"></i>
                    <span>Certifications</span>
                </div>
                <div class="section-type-option" data-section-type="awards">
                    <i class="fas fa-trophy"></i>
                    <span>Awards</span>
                </div>
                <div class="section-type-option" data-section-type="publications">
                    <i class="fas fa-book"></i>
                    <span>Publications</span>
                </div>
                <div class="section-type-option" data-section-type="languages">
                    <i class="fas fa-language"></i>
                    <span>Languages</span>
                </div>
                <div class="section-type-option" data-section-type="volunteer">
                    <i class="fas fa-hands-helping"></i>
                    <span>Volunteer</span>
                </div>
            </div>

            <div style="display:flex; gap:10px; margin-top:20px;">
                <button class="add-section-btn" onclick="addCustomSection()" style="flex:1;">
                    <i class="fas fa-plus"></i> Add Section
                </button>
                <button class="btn btn-outline" onclick="closeCustomSectionModal()" style="flex:1;">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Cover Letter Generator Button -->
    <button class="cover-letter-btn" onclick="openCoverLetterGenerator()" title="Generate Cover Letter">
        <i class="fas fa-envelope"></i>
    </button>

    <!-- Resume Management Button -->
    <button class="resume-management-btn" onclick="openResumeManagement()">
        <i class="fas fa-folder-open"></i>
        <span>My Resumes</span>
        <span class="resume-count-badge" id="resumeCountBadge">0</span>
    </button>

    <!-- ATS Score Panel -->
    <button class="ats-score-toggle" id="atsToggle" onclick="toggleATSPanel()">
        <i class="fas fa-chart-line"></i>
    </button>

    <div class="ats-score-panel" id="atsPanel">
        <div class="ats-header">
            <h3><i class="fas fa-robot"></i> ATS Score</h3>
            <button class="ats-close" onclick="toggleATSPanel()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="ats-content" id="atsContent">
            <div class="ats-score-display">
                <div class="score-circle">
                    <svg width="120" height="120">
                        <circle class="circle-bg" cx="60" cy="60" r="50"></circle>
                        <circle class="circle-progress" cx="60" cy="60" r="50" id="scoreCircle"></circle>
                    </svg>
                    <div class="score-text" id="scoreText">--</div>
                </div>
                <div class="score-label">ATS Compatibility</div>
                <span class="score-rating" id="scoreRating">Not Analyzed</span>
            </div>

            <div class="ats-metrics" id="atsMetrics">
                <!-- Metrics will be populated by JavaScript -->
            </div>

            <div class="ats-suggestions" id="atsSuggestions">
                <!-- Suggestions will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        let currentTemplate = 'modern';
        let currentSuggestionContext = null;

        // Template switcher
        document.querySelectorAll('.template-option').forEach(opt => {
            opt.addEventListener('click', function() {
                document.querySelectorAll('.template-option').forEach(o => o.classList.remove('active'));
                this.classList.add('active');
                currentTemplate = this.dataset.template;
                if (document.getElementById('previewArea').innerHTML.includes('paper')) {
                    generateResume();
                }
            });
        });

        // Color Theme Selector
        let currentTheme = 'purple';
        
        function initColorTheme() {
            // Load saved theme
            const savedTheme = localStorage.getItem('resume_color_theme');
            if (savedTheme) {
                applyTheme(savedTheme);
            } else {
                applyTheme('purple');
            }

            // Setup theme click handlers
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.dataset.theme;
                    applyTheme(theme);
                    localStorage.setItem('resume_color_theme', theme);
                });
            });
        }

        function applyTheme(theme) {
            currentTheme = theme;
            
            // Update body class
            document.body.className = '';
            document.body.classList.add(`theme-${theme}`);
            
            // Update active theme option
            document.querySelectorAll('.theme-option').forEach(opt => {
                opt.classList.remove('active');
                if (opt.dataset.theme === theme) {
                    opt.classList.add('active');
                }
            });

            // Regenerate preview if it exists
            if (document.getElementById('previewArea').innerHTML.includes('paper')) {
                generateResume();
            }
        }

        // Initialize theme on load
        initColorTheme();

        // Auto-save functionality
        function autoSave() {
            const data = {
                name: document.getElementById('name').value,
                title: document.getElementById('title').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                location: document.getElementById('location').value,
                linkedin: document.getElementById('linkedin').value,
                summary: document.getElementById('summary').value,
                experiences: collectItems('.exp-role', '.exp-dates', '.exp-desc'),
                educations: collectItems('.edu-role', '.edu-dates', '.edu-desc'),
                skills: Array.from(document.querySelectorAll('#skills .chip')).map(s => s.textContent)
            };
            localStorage.setItem('resume_data', JSON.stringify(data));
        }

        function loadSavedData() {
            const saved = localStorage.getItem('resume_data');
            if (!saved) return;
            
            try {
                const data = JSON.parse(saved);
                document.getElementById('name').value = data.name || '';
                document.getElementById('title').value = data.title || '';
                document.getElementById('email').value = data.email || '';
                document.getElementById('phone').value = data.phone || '';
                document.getElementById('location').value = data.location || '';
                document.getElementById('linkedin').value = data.linkedin || '';
                document.getElementById('summary').value = data.summary || '';
                
                if (data.skills) {
                    data.skills.forEach(skill => addSkill(skill));
                }
            } catch (e) {
                console.error('Error loading saved data:', e);
            }
        }

        function saveProgress() {
            autoSave();
            alert(' Progress saved successfully!');
        }

        // Load saved data on page load
        window.addEventListener('load', loadSavedData);

        // Auto-save every 30 seconds
        setInterval(autoSave, 30000);

        function addExperience() {
            const cont = document.getElementById('experiences');
            const div = document.createElement('div');
            div.className = 'exp-item';
            div.innerHTML = `
                <input class="exp-role" type="text" placeholder="Job Title  Company Name" />
                <input class="exp-dates" type="text" placeholder="Jan 2020 - Present" />
                <textarea class="exp-desc" placeholder=" Describe your key achievements and responsibilities
 Use bullet points to highlight impact
 Quantify results when possible"></textarea>
                <button class="delete-btn" onclick="this.parentElement.remove()">
                    <i class="fas fa-trash"></i> Remove
                </button>
            `;
            cont.appendChild(div);
        }

        function addEducation() {
            const cont = document.getElementById('educations');
            const div = document.createElement('div');
            div.className = 'edu-item';
            div.innerHTML = `
                <input class="edu-role" type="text" placeholder="Degree  Institution Name" />
                <input class="edu-dates" type="text" placeholder="Graduation Year" />
                <textarea class="edu-desc" placeholder="GPA, Honors, Relevant Coursework (Optional)"></textarea>
                <button class="delete-btn" onclick="this.parentElement.remove()">
                    <i class="fas fa-trash"></i> Remove
                </button>
            `;
            cont.appendChild(div);
        }

        const skillInput = document.getElementById('skillInput');
        if (skillInput) {
            skillInput.addEventListener('keydown', function (e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    addSkill(skillInput.value);
                    skillInput.value = '';
                }
            });
        }

        function addSkill(text) {
            if (!text || !text.trim()) return;
            const box = document.getElementById('skills');
            const chip = document.createElement('span');
            chip.className = 'chip';
            chip.innerHTML = `${escapeHtml(text.trim())} <i class="fas fa-times" style="margin-left:6px;cursor:pointer;" onclick="this.parentElement.remove()"></i>`;
            box.appendChild(chip);
        }

        function collectItems(selectorRole, selectorDates, selectorDesc) {
            const roles = Array.from(document.querySelectorAll(selectorRole));
            const dates = Array.from(document.querySelectorAll(selectorDates));
            const descs = Array.from(document.querySelectorAll(selectorDesc));
            const out = [];
            for (let i = 0; i < roles.length; i++) {
                const r = roles[i].value.trim();
                const dt = dates[i]?.value.trim() || '';
                const d = descs[i]?.value.trim() || '';
                if (r) out.push({ role: r, dates: dt, desc: d });
            }
            return out;
        }

        function generateResume() {
            const name = document.getElementById('name').value || 'Your Name';
            const title = document.getElementById('title').value || 'Your Professional Title';
            const email = document.getElementById('email').value || '';
            const phone = document.getElementById('phone').value || '';
            const location = document.getElementById('location').value || '';
            const linkedin = document.getElementById('linkedin').value || '';
            const summary = document.getElementById('summary').value || '';
            const exps = collectItems('.exp-role', '.exp-dates', '.exp-desc');
            const edus = collectItems('.edu-role', '.edu-dates', '.edu-desc');
            const skillChips = Array.from(document.querySelectorAll('#skills .chip')).map(s => s.textContent.replace('', '').trim());

            const p = document.getElementById('previewArea');
            p.innerHTML = '';
            const wrapper = document.createElement('div');
            wrapper.className = `paper ${currentTemplate}`;

            // Special handling for creative template (two-column)
            if (currentTemplate === 'creative') {
                generateCreativeTemplate(wrapper, name, title, email, phone, location, linkedin, summary, exps, edus, skillChips);
                p.appendChild(wrapper);
                localStorage.setItem('resume_preview', p.innerHTML);
                if (window.innerWidth <= 1024) {
                    p.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
                return;
            }

            // Header
            const header = document.createElement('div');
            header.className = 'r-header';
            
            const left = document.createElement('div');
            const hname = document.createElement('div');
            hname.className = 'r-name';
            hname.textContent = name;
            const htitle = document.createElement('div');
            htitle.className = 'r-title';
            htitle.textContent = title;
            left.appendChild(hname);
            left.appendChild(htitle);
            
            const right = document.createElement('div');
            right.className = 'r-contact';
            if (email) {
                const e = document.createElement('div');
                e.innerHTML = '<i class="fas fa-envelope"></i>' + escapeHtml(email);
                right.appendChild(e);
            }
            if (phone) {
                const ph = document.createElement('div');
                ph.innerHTML = '<i class="fas fa-phone"></i>' + escapeHtml(phone);
                right.appendChild(ph);
            }
            if (location) {
                const loc = document.createElement('div');
                loc.innerHTML = '<i class="fas fa-map-marker-alt"></i>' + escapeHtml(location);
                right.appendChild(loc);
            }
            if (linkedin) {
                const li = document.createElement('div');
                li.innerHTML = '<i class="fab fa-linkedin"></i>' + escapeHtml(linkedin);
                right.appendChild(li);
            }
            
            header.appendChild(left);
            header.appendChild(right);
            wrapper.appendChild(header);

            // Summary
            if (summary) {
                const s = document.createElement('div');
                s.className = 'section';
                s.innerHTML = '<div class="section-title">Professional Summary</div><div style="line-height:1.8;color:#475569">' + escapeHtml(summary).replace(/\n/g, '<br>') + '</div>';
                wrapper.appendChild(s);
            }

            // Experience
            if (exps.length) {
                const s = document.createElement('div');
                s.className = 'section';
                s.innerHTML = '<div class="section-title">Work Experience</div>';
                exps.forEach(it => {
                    const item = document.createElement('div');
                    item.style.marginTop = '15px';
                    let html = '<div style="font-weight:700;font-size:16px;color:#1e293b">' + escapeHtml(it.role) + '</div>';
                    if (it.dates) {
                        html += '<div style="color:#667eea;font-weight:600;font-size:14px;margin-top:4px">' + escapeHtml(it.dates) + '</div>';
                    }
                    if (it.desc) {
                        html += '<div style="color:#475569;margin-top:8px;line-height:1.8">' + escapeHtml(it.desc).replace(/\n/g, '<br>') + '</div>';
                    }
                    item.innerHTML = html;
                    s.appendChild(item);
                });
                wrapper.appendChild(s);
            }

            // Education
            if (edus.length) {
                const s = document.createElement('div');
                s.className = 'section';
                s.innerHTML = '<div class="section-title">Education</div>';
                edus.forEach(it => {
                    const item = document.createElement('div');
                    item.style.marginTop = '15px';
                    let html = '<div style="font-weight:700;font-size:16px;color:#1e293b">' + escapeHtml(it.role) + '</div>';
                    if (it.dates) {
                        html += '<div style="color:#667eea;font-weight:600;font-size:14px;margin-top:4px">' + escapeHtml(it.dates) + '</div>';
                    }
                    if (it.desc) {
                        html += '<div style="color:#475569;margin-top:8px;line-height:1.8">' + escapeHtml(it.desc).replace(/\n/g, '<br>') + '</div>';
                    }
                    item.innerHTML = html;
                    s.appendChild(item);
                });
                wrapper.appendChild(s);
            }

            // Skills
            if (skillChips.length) {
                const s = document.createElement('div');
                s.className = 'section';
                s.innerHTML = '<div class="section-title">Skills</div>';
                const box = document.createElement('div');
                box.style.marginTop = '10px';
                skillChips.forEach(sk => {
                    const sp = document.createElement('span');
                    sp.className = 'chip';
                    sp.textContent = sk;
                    box.appendChild(sp);
                });
                s.appendChild(box);
                wrapper.appendChild(s);
            }

            // Custom Sections (in order they appear)
            const customSections = document.querySelectorAll('.form-section[data-section-id^="custom-"]');
            customSections.forEach(section => {
                const sectionId = section.dataset.sectionId;
                const titleElement = section.querySelector('.form-section-title');
                const sectionTitle = titleElement ? titleElement.textContent.trim() : 'Custom Section';
                const items = section.querySelectorAll('.custom-item');
                
                if (items.length > 0) {
                    const s = document.createElement('div');
                    s.className = 'section';
                    s.innerHTML = `<div class="section-title">${escapeHtml(sectionTitle)}</div>`;
                    
                    items.forEach(item => {
                        const titleInput = item.querySelector('.custom-title');
                        const descTextarea = item.querySelector('.custom-desc');
                        
                        if (titleInput && titleInput.value) {
                            const itemDiv = document.createElement('div');
                            itemDiv.style.marginTop = '15px';
                            let html = '<div style="font-weight:700;font-size:16px;color:#1e293b">' + escapeHtml(titleInput.value) + '</div>';
                            
                            if (descTextarea && descTextarea.value) {
                                html += '<div style="color:#475569;margin-top:8px;line-height:1.8">' + escapeHtml(descTextarea.value).replace(/\n/g, '<br>') + '</div>';
                            }
                            
                            itemDiv.innerHTML = html;
                            s.appendChild(itemDiv);
                        }
                    });
                    
                    wrapper.appendChild(s);
                }
            });

            p.appendChild(wrapper);
            localStorage.setItem('resume_preview', p.innerHTML);
            
            // Smooth scroll to preview on mobile
            if (window.innerWidth <= 1024) {
                p.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Creative template generator (two-column layout)
        function generateCreativeTemplate(wrapper, name, title, email, phone, location, linkedin, summary, exps, edus, skillChips) {
            const sidebar = document.createElement('div');
            sidebar.className = 'sidebar';
            
            // Header in sidebar
            const header = document.createElement('div');
            header.className = 'r-header';
            header.innerHTML = `
                <div class="r-name">${escapeHtml(name)}</div>
                <div class="r-title">${escapeHtml(title)}</div>
            `;
            sidebar.appendChild(header);
            
            // Contact in sidebar
            const contact = document.createElement('div');
            contact.className = 'r-contact';
            let contactHTML = '';
            if (email) contactHTML += `<div><i class="fas fa-envelope"></i>${escapeHtml(email)}</div>`;
            if (phone) contactHTML += `<div><i class="fas fa-phone"></i>${escapeHtml(phone)}</div>`;
            if (location) contactHTML += `<div><i class="fas fa-map-marker-alt"></i>${escapeHtml(location)}</div>`;
            if (linkedin) contactHTML += `<div><i class="fab fa-linkedin"></i>${escapeHtml(linkedin)}</div>`;
            contact.innerHTML = contactHTML;
            sidebar.appendChild(contact);
            
            // Skills in sidebar
            if (skillChips.length) {
                const skillSection = document.createElement('div');
                skillSection.className = 'section';
                skillSection.innerHTML = '<div class="section-title">Skills</div>';
                const skillBox = document.createElement('div');
                skillBox.style.marginTop = '15px';
                skillChips.forEach(sk => {
                    const chip = document.createElement('span');
                    chip.className = 'chip';
                    chip.textContent = sk;
                    skillBox.appendChild(chip);
                });
                skillSection.appendChild(skillBox);
                sidebar.appendChild(skillSection);
            }
            
            // Education in sidebar
            if (edus.length) {
                const eduSection = document.createElement('div');
                eduSection.className = 'section';
                eduSection.innerHTML = '<div class="section-title">Education</div>';
                edus.forEach(it => {
                    const item = document.createElement('div');
                    item.style.marginTop = '12px';
                    let html = '<div style="font-weight:700;font-size:14px">' + escapeHtml(it.role) + '</div>';
                    if (it.dates) html += '<div style="font-size:12px;margin-top:2px;opacity:0.9">' + escapeHtml(it.dates) + '</div>';
                    if (it.desc) html += '<div style="font-size:12px;margin-top:4px;opacity:0.85;line-height:1.6">' + escapeHtml(it.desc).replace(/\n/g, '<br>') + '</div>';
                    item.innerHTML = html;
                    eduSection.appendChild(item);
                });
                sidebar.appendChild(eduSection);
            }
            
            wrapper.appendChild(sidebar);
            
            // Main content area
            const mainContent = document.createElement('div');
            mainContent.className = 'main-content';
            
            // Summary in main
            if (summary) {
                const summarySection = document.createElement('div');
                summarySection.className = 'section';
                summarySection.innerHTML = '<div class="section-title">Professional Summary</div><div style="line-height:1.8;color:#475569;margin-top:10px">' + escapeHtml(summary).replace(/\n/g, '<br>') + '</div>';
                mainContent.appendChild(summarySection);
            }
            
            // Experience in main
            if (exps.length) {
                const expSection = document.createElement('div');
                expSection.className = 'section';
                expSection.innerHTML = '<div class="section-title">Work Experience</div>';
                exps.forEach(it => {
                    const item = document.createElement('div');
                    item.style.marginTop = '15px';
                    let html = '<div style="font-weight:700;font-size:16px;color:#1e293b">' + escapeHtml(it.role) + '</div>';
                    if (it.dates) html += '<div style="color:#667eea;font-weight:600;font-size:14px;margin-top:4px">' + escapeHtml(it.dates) + '</div>';
                    if (it.desc) html += '<div style="color:#475569;margin-top:8px;line-height:1.8">' + escapeHtml(it.desc).replace(/\n/g, '<br>') + '</div>';
                    item.innerHTML = html;
                    expSection.appendChild(item);
                });
                mainContent.appendChild(expSection);
            }

            // Custom Sections in main content
            const customSections = document.querySelectorAll('.form-section[data-section-id^="custom-"]');
            customSections.forEach(section => {
                const sectionId = section.dataset.sectionId;
                const titleElement = section.querySelector('.form-section-title');
                const sectionTitle = titleElement ? titleElement.textContent.trim() : 'Custom Section';
                const items = section.querySelectorAll('.custom-item');
                
                if (items.length > 0) {
                    const s = document.createElement('div');
                    s.className = 'section';
                    s.innerHTML = `<div class="section-title">${escapeHtml(sectionTitle)}</div>`;
                    
                    items.forEach(item => {
                        const titleInput = item.querySelector('.custom-title');
                        const descTextarea = item.querySelector('.custom-desc');
                        
                        if (titleInput && titleInput.value) {
                            const itemDiv = document.createElement('div');
                            itemDiv.style.marginTop = '15px';
                            let html = '<div style="font-weight:700;font-size:16px;color:#1e293b">' + escapeHtml(titleInput.value) + '</div>';
                            
                            if (descTextarea && descTextarea.value) {
                                html += '<div style="color:#475569;margin-top:8px;line-height:1.8">' + escapeHtml(descTextarea.value).replace(/\n/g, '<br>') + '</div>';
                            }
                            
                            itemDiv.innerHTML = html;
                            s.appendChild(itemDiv);
                        }
                    });
                    
                    mainContent.appendChild(s);
                }
            });
            
            wrapper.appendChild(mainContent);
        }

        // safely escape user text before inserting into HTML
        function escapeHtml(unsafe) {
            if (!unsafe) return '';
            return unsafe.replace(/[&<>\"]/g, function (m) {
                return ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;' })[m];
            });
        }

        function openPrint() {
            if (!document.getElementById('previewArea').innerHTML.includes('paper')) {
                alert(' Please preview your resume first before downloading.');
                return;
            }
            
            const content = document.getElementById('previewArea').innerHTML;
            const w = window.open('', '_blank', 'width=900,height=800');
            const css = `<style>
                @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
                @import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css');
                * { margin: 0; padding: 0; box-sizing: border-box; }
                body { font-family: 'Inter', Arial, sans-serif; padding: 40px; color: #1e293b; background: white; }
                .paper { max-width: 850px; margin: 0 auto; }
                .r-name { font-size: 32px; font-weight: 800; letter-spacing: -0.5px; color: #1e293b; margin-bottom: 5px; }
                .r-title { color: #667eea; font-weight: 600; font-size: 18px; margin-top: 5px; }
                .r-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 20px; margin-bottom: 25px; }
                .r-contact { text-align: right; font-size: 14px; color: #475569; line-height: 1.8; }
                .r-contact i { margin-right: 6px; color: #667eea; width: 16px; }
                .section { margin-top: 25px; }
                .section-title { font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; }
                .chip { display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 6px 14px; border-radius: 20px; margin: 6px 6px 0 0; font-weight: 600; font-size: 13px; }
                .modern .r-header { border-bottom: 3px solid #667eea; padding-bottom: 20px; }
                .classic .r-header { text-align: center; border-bottom: 2px solid #1e293b; padding-bottom: 20px; }
                .minimal .r-header { border-left: 5px solid #667eea; padding-left: 20px; }
                @media print {
                    body { padding: 0; }
                    .paper { box-shadow: none; }
                }
            </style>`;
            
            w.document.write('<!doctype html><html><head><meta charset="utf-8"><title>Resume - ' + escapeHtml(document.getElementById('name').value || 'Resume') + '</title>' + css + '</head><body>' + content + '</body></html>');
            w.document.close();
            
            setTimeout(function () {
                try {
                    w.focus();
                    w.print();
                } catch (e) {
                    console.error('Print error:', e);
                }
            }, 800);
        }

        function resetForm() {
            if (!confirm(' Are you sure you want to reset all fields? This action cannot be undone.')) return;
            localStorage.removeItem('resume_preview');
            localStorage.removeItem('resume_data');
            location.reload();
        }

        // ============ AI SUGGESTIONS SYSTEM ============
        
        const aiSuggestionsData = {
            summary: {
                'Software Engineer': [
                    'Innovative Software Engineer with 5+ years of experience building scalable web applications. Proven track record of reducing load times by 40% and improving user engagement through cutting-edge technologies.',
                    'Results-driven Full Stack Developer specializing in cloud-native solutions. Successfully led cross-functional teams to deliver mission-critical projects 20% ahead of schedule.',
                    'Passionate technologist with expertise in architecting robust systems. Delivered enterprise solutions serving 2M+ users with 99.9% uptime.'
                ],
                'Data Scientist': [
                    'Data-driven professional with expertise in machine learning and statistical analysis. Developed predictive models that increased revenue by 25% through intelligent customer segmentation.',
                    'Analytical thinker specializing in turning complex data into actionable insights. Built recommendation engines improving user retention by 35%.',
                    'PhD-trained Data Scientist with proven ability to solve business challenges through advanced analytics. Implemented AI solutions reducing operational costs by $2M annually.'
                ],
                'Product Manager': [
                    'Strategic Product Manager with track record of launching successful products from concept to market. Led initiatives generating $5M+ in annual revenue.',
                    'Customer-focused leader skilled at translating market needs into product roadmaps. Increased user satisfaction scores by 45% through data-driven feature prioritization.',
                    'Experienced PM combining technical expertise with business acumen. Successfully managed cross-functional teams of 15+ to deliver products used by millions.'
                ],
                'Marketing Manager': [
                    'Creative Marketing strategist with expertise in digital campaigns and brand management. Drove 200% increase in online engagement through innovative multi-channel strategies.',
                    'ROI-focused marketing professional with proven success in B2B and B2C environments. Orchestrated campaigns generating $3M in qualified leads.',
                    'Data-driven marketer combining creative storytelling with analytical rigor. Achieved 150% growth in customer acquisition within 12 months.'
                ],
                'default': [
                    'Accomplished professional with proven track record of exceeding goals and driving organizational success. Known for combining analytical thinking with creative problem-solving.',
                    'Results-oriented leader with expertise in building high-performing teams and delivering complex projects. Consistently recognized for innovation and operational excellence.',
                    'Dynamic professional bringing strong technical and interpersonal skills. Demonstrated ability to adapt quickly and drive measurable business impact.'
                ]
            },
            experience: [
                'Spearheaded development of enterprise platform serving 100K+ daily active users',
                'Led cross-functional team of 8 engineers to deliver project 3 weeks ahead of schedule',
                'Architected microservices solution reducing infrastructure costs by 35%',
                'Implemented CI/CD pipeline decreasing deployment time from 4 hours to 15 minutes',
                'Optimized database queries resulting in 60% improvement in application performance',
                'Mentored 5 junior developers, improving team productivity by 25%',
                'Collaborated with product team to define technical requirements for new features',
                'Reduced bug count by 40% through implementation of automated testing framework',
                'Migrated legacy monolith to cloud-native architecture, improving scalability 10x',
                'Established coding standards and best practices adopted across engineering organization',
                'Designed and launched customer-facing dashboard with 95% satisfaction rating',
                'Streamlined development workflow reducing time-to-market by 30%',
                'Conducted code reviews ensuring high-quality deliverables and knowledge sharing',
                'Integrated third-party APIs enabling new revenue stream of $500K annually',
                'Championed Agile methodologies leading to 50% faster sprint velocity'
            ],
            powerWords: {
                leadership: ['Led', 'Managed', 'Directed', 'Coordinated', 'Supervised', 'Mentored', 'Guided', 'Orchestrated', 'Championed', 'Spearheaded'],
                achievement: ['Achieved', 'Exceeded', 'Delivered', 'Accomplished', 'Attained', 'Surpassed', 'Completed', 'Realized', 'Secured', 'Generated'],
                improvement: ['Improved', 'Enhanced', 'Optimized', 'Streamlined', 'Transformed', 'Revitalized', 'Upgraded', 'Modernized', 'Refined', 'Strengthened'],
                technical: ['Developed', 'Engineered', 'Architected', 'Designed', 'Implemented', 'Built', 'Created', 'Programmed', 'Coded', 'Integrated'],
                innovation: ['Pioneered', 'Innovated', 'Launched', 'Initiated', 'Established', 'Introduced', 'Founded', 'Conceptualized', 'Designed', 'Created'],
                analysis: ['Analyzed', 'Assessed', 'Evaluated', 'Researched', 'Investigated', 'Examined', 'Diagnosed', 'Identified', 'Measured', 'Quantified']
            },
            skills: {
                'Software Engineer': ['JavaScript', 'Python', 'React', 'Node.js', 'AWS', 'Docker', 'Git', 'PostgreSQL', 'REST APIs', 'Microservices', 'CI/CD', 'Agile'],
                'Data Scientist': ['Python', 'Machine Learning', 'TensorFlow', 'SQL', 'Data Visualization', 'Statistics', 'Pandas', 'NumPy', 'Scikit-learn', 'Deep Learning', 'A/B Testing', 'Big Data'],
                'Product Manager': ['Product Strategy', 'Roadmap Planning', 'User Research', 'Data Analysis', 'Agile', 'Stakeholder Management', 'A/B Testing', 'SQL', 'Wireframing', 'Market Research', 'Feature Prioritization'],
                'Designer': ['UI/UX Design', 'Figma', 'Adobe XD', 'Sketch', 'Prototyping', 'User Research', 'Wireframing', 'Design Systems', 'HTML/CSS', 'Responsive Design', 'Usability Testing'],
                'Marketing': ['Digital Marketing', 'SEO', 'Content Strategy', 'Social Media', 'Google Analytics', 'Email Marketing', 'Campaign Management', 'Marketing Automation', 'CRM', 'A/B Testing'],
                'default': ['Communication', 'Leadership', 'Problem Solving', 'Team Collaboration', 'Project Management', 'Time Management', 'Critical Thinking', 'Adaptability', 'Creativity', 'Attention to Detail']
            }
        };

        function openAISuggestions(context) {
            currentSuggestionContext = context;
            const panel = document.getElementById('aiSuggestionsPanel');
            const content = document.getElementById('suggestionsContent');
            
            panel.classList.add('active');
            content.innerHTML = '<div class="ai-loading"><i class="fas fa-magic"></i><p style="margin-top:15px;">Generating AI suggestions...</p></div>';
            
            setTimeout(() => {
                content.innerHTML = generateSuggestionsHTML(context);
            }, 800);
        }

        function closeAISuggestions() {
            document.getElementById('aiSuggestionsPanel').classList.remove('active');
        }

        function generateSuggestionsHTML(context) {
            let html = '';
            const userTitle = document.getElementById('title').value || '';
            
            if (context === 'summary') {
                html += '<div class="suggestion-category">';
                html += '<h4><i class="fas fa-lightbulb"></i> Professional Summary Examples</h4>';
                html += '<p style="color:#64748b;font-size:13px;margin-bottom:15px;">Click any suggestion to use it (you can edit after):</p>';
                
                const summaries = getSummariesForRole(userTitle);
                summaries.forEach(text => {
                    html += `<div class="suggestion-item" onclick="useSuggestion('summary', '${escapeForJS(text)}')">
                        <div class="suggestion-text">${escapeHtml(text)}</div>
                        <span class="suggestion-badge">Click to use</span>
                    </div>`;
                });
                html += '</div>';
                
            } else if (context === 'experience') {
                html += '<div class="suggestion-category">';
                html += '<h4><i class="fas fa-star"></i> Achievement Examples</h4>';
                html += '<p style="color:#64748b;font-size:13px;margin-bottom:15px;">Strong bullet points to inspire your descriptions:</p>';
                
                aiSuggestionsData.experience.slice(0, 10).forEach(text => {
                    html += `<div class="suggestion-item" onclick="appendToExperience('${escapeForJS(text)}')">
                        <div class="suggestion-text"> ${escapeHtml(text)}</div>
                        <span class="suggestion-badge">Add to experience</span>
                    </div>`;
                });
                html += '</div>';
                
                html += '<div class="suggestion-category">';
                html += '<h4><i class="fas fa-bolt"></i> Power Words</h4>';
                html += '<p style="color:#64748b;font-size:13px;margin-bottom:10px;">Use these action verbs to make your experience more impactful:</p>';
                
                Object.keys(aiSuggestionsData.powerWords).forEach(category => {
                    html += `<div style="margin-bottom:15px;">`;
                    html += `<div style="font-weight:600;font-size:13px;color:#667eea;margin-bottom:8px;text-transform:capitalize;">${category}</div>`;
                    html += '<div class="power-words">';
                    aiSuggestionsData.powerWords[category].forEach(word => {
                        html += `<span class="power-word" onclick="copyToClipboard('${word}')" title="Click to copy">${word}</span>`;
                    });
                    html += '</div></div>';
                });
                html += '</div>';
                
            } else if (context === 'skills') {
                html += '<div class="suggestion-category">';
                html += '<h4><i class="fas fa-tools"></i> Recommended Skills</h4>';
                html += '<p style="color:#64748b;font-size:13px;margin-bottom:15px;">Based on your role, these skills are commonly sought:</p>';
                
                const skills = getSkillsForRole(userTitle);
                html += '<div class="power-words">';
                skills.forEach(skill => {
                    html += `<span class="power-word" onclick="addSkill('${escapeForJS(skill)}')">${escapeHtml(skill)}</span>`;
                });
                html += '</div>';
                html += '</div>';
            }
            
            return html;
        }

        function getSummariesForRole(title) {
            const lowerTitle = title.toLowerCase();
            if (lowerTitle.includes('software') || lowerTitle.includes('developer') || lowerTitle.includes('engineer')) {
                return aiSuggestionsData.summary['Software Engineer'];
            } else if (lowerTitle.includes('data') || lowerTitle.includes('scientist') || lowerTitle.includes('analyst')) {
                return aiSuggestionsData.summary['Data Scientist'];
            } else if (lowerTitle.includes('product') || lowerTitle.includes('manager')) {
                return aiSuggestionsData.summary['Product Manager'];
            } else if (lowerTitle.includes('marketing')) {
                return aiSuggestionsData.summary['Marketing Manager'];
            }
            return aiSuggestionsData.summary['default'];
        }

        function getSkillsForRole(title) {
            const lowerTitle = title.toLowerCase();
            if (lowerTitle.includes('software') || lowerTitle.includes('developer') || lowerTitle.includes('engineer')) {
                return aiSuggestionsData.skills['Software Engineer'];
            } else if (lowerTitle.includes('data') || lowerTitle.includes('scientist')) {
                return aiSuggestionsData.skills['Data Scientist'];
            } else if (lowerTitle.includes('product') || lowerTitle.includes('manager')) {
                return aiSuggestionsData.skills['Product Manager'];
            } else if (lowerTitle.includes('design')) {
                return aiSuggestionsData.skills['Designer'];
            } else if (lowerTitle.includes('marketing')) {
                return aiSuggestionsData.skills['Marketing'];
            }
            return aiSuggestionsData.skills['default'];
        }

        function useSuggestion(field, text) {
            if (field === 'summary') {
                document.getElementById('summary').value = text;
                closeAISuggestions();
                alert(' AI suggestion applied! Feel free to customize it.');
            }
        }

        function appendToExperience(text) {
            const expItems = document.querySelectorAll('.exp-desc');
            if (expItems.length > 0) {
                const lastExp = expItems[expItems.length - 1];
                const currentText = lastExp.value.trim();
                lastExp.value = currentText ? currentText + '\n ' + text : ' ' + text;
                alert(' Added to your most recent experience!');
            } else {
                alert('Please add an experience section first.');
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const notification = document.createElement('div');
                notification.textContent = ` "${text}" copied!`;
                notification.style.cssText = 'position:fixed;top:20px;right:20px;background:#10b981;color:white;padding:12px 20px;border-radius:8px;font-weight:600;z-index:10001;animation:fadeInUp 0.3s ease;';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 2000);
            });
        }

        function escapeForJS(str) {
            return str.replace(/'/g, "\\'").replace(/"/g, '\\"').replace(/\n/g, '\\n');
        }

        // ============ END AI SUGGESTIONS SYSTEM ============

        // ============ ATS SCORE CHECKER SYSTEM ============
        
        let atsScore = 0;
        let atsAnalysisData = {};

        function toggleATSPanel() {
            const panel = document.getElementById('atsPanel');
            const toggle = document.getElementById('atsToggle');
            const isShown = panel.classList.contains('show');
            
            if (isShown) {
                panel.classList.remove('show');
                toggle.classList.remove('active');
            } else {
                panel.classList.add('show');
                toggle.classList.add('active');
                calculateATSScore();
            }
        }

        function calculateATSScore() {
            const name = document.getElementById('name').value.trim();
            const title = document.getElementById('title').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const summary = document.getElementById('summary').value.trim();
            const experiences = collectItems('.exp-role', '.exp-dates', '.exp-desc');
            const educations = collectItems('.edu-role', '.edu-dates', '.edu-desc');
            const skillChips = Array.from(document.querySelectorAll('#skills .chip')).map(s => s.textContent.replace('', '').trim());

            let score = 0;
            let maxScore = 100;
            const issues = [];
            const metrics = {};

            // Contact Information (20 points)
            let contactScore = 0;
            if (name && name !== 'Your Name') contactScore += 5;
            if (email && email.includes('@')) contactScore += 5;
            if (phone) contactScore += 5;
            if (title && title !== 'Your Professional Title') contactScore += 5;
            score += contactScore;
            metrics.contact = { score: contactScore, max: 20 };
            if (contactScore < 20) issues.push('Add complete contact information (name, email, phone, title)');

            // Professional Summary (15 points)
            let summaryScore = 0;
            if (summary) {
                const wordCount = summary.split(/\s+/).length;
                if (wordCount >= 30 && wordCount <= 100) {
                    summaryScore = 15;
                } else if (wordCount >= 15 && wordCount < 30) {
                    summaryScore = 10;
                    issues.push('Professional summary is too short (aim for 30-100 words)');
                } else if (wordCount > 100) {
                    summaryScore = 10;
                    issues.push('Professional summary is too long (aim for 30-100 words)');
                } else {
                    summaryScore = 5;
                    issues.push('Add a professional summary (30-100 words recommended)');
                }
            } else {
                issues.push('Add a professional summary to highlight your expertise');
            }
            score += summaryScore;
            metrics.summary = { score: summaryScore, max: 15 };

            // Work Experience (30 points)
            let expScore = 0;
            if (experiences.length === 0) {
                issues.push('Add at least 2-3 relevant work experiences');
            } else if (experiences.length === 1) {
                expScore = 15;
                issues.push('Add more work experiences (2-3 recommended)');
            } else if (experiences.length >= 2) {
                expScore = 25;
                
                // Check for quantified achievements
                let hasQuantification = false;
                experiences.forEach(exp => {
                    if (exp.desc && /\d+/.test(exp.desc)) {
                        hasQuantification = true;
                    }
                });
                
                if (hasQuantification) {
                    expScore = 30;
                } else {
                    issues.push('Quantify your achievements with numbers and metrics');
                }

                // Check for action verbs
                const actionVerbs = ['led', 'managed', 'developed', 'created', 'improved', 'increased', 'reduced', 'achieved', 'implemented', 'designed', 'built', 'launched'];
                let hasActionVerbs = false;
                experiences.forEach(exp => {
                    if (exp.desc) {
                        const lowerDesc = exp.desc.toLowerCase();
                        if (actionVerbs.some(verb => lowerDesc.includes(verb))) {
                            hasActionVerbs = true;
                        }
                    }
                });
                
                if (!hasActionVerbs) {
                    issues.push('Use strong action verbs (Led, Developed, Achieved, etc.)');
                }
            }
            score += expScore;
            metrics.experience = { score: expScore, max: 30 };

            // Education (10 points)
            let eduScore = 0;
            if (educations.length > 0) {
                eduScore = 10;
            } else {
                issues.push('Add your educational background');
            }
            score += eduScore;
            metrics.education = { score: eduScore, max: 10 };

            // Skills (20 points)
            let skillScore = 0;
            if (skillChips.length === 0) {
                issues.push('Add 6-12 relevant skills');
            } else if (skillChips.length < 5) {
                skillScore = 10;
                issues.push('Add more skills (6-12 recommended)');
            } else if (skillChips.length >= 6 && skillChips.length <= 15) {
                skillScore = 20;
            } else {
                skillScore = 15;
                issues.push('Too many skills listed - focus on 6-12 most relevant');
            }
            score += skillScore;
            metrics.skills = { score: skillScore, max: 20 };

            // Formatting & ATS Compatibility (5 points)
            let formatScore = 5; // Base score for using the builder
            score += formatScore;
            metrics.formatting = { score: formatScore, max: 5 };

            // Calculate final score
            atsScore = Math.round(score);
            atsAnalysisData = { score: atsScore, metrics, issues };

            displayATSScore();
        }

        function displayATSScore() {
            const { score, metrics, issues } = atsAnalysisData;

            // Update score circle
            const scoreText = document.getElementById('scoreText');
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreRating = document.getElementById('scoreRating');

            scoreText.textContent = score;

            // Animate circle
            const circumference = 2 * Math.PI * 50;
            const offset = circumference - (score / 100) * circumference;
            scoreCircle.style.strokeDasharray = circumference;
            scoreCircle.style.strokeDashoffset = offset;

            // Set color based on score
            let color, rating, ratingClass;
            if (score >= 80) {
                color = '#10b981';
                rating = 'Excellent';
                ratingClass = 'excellent';
            } else if (score >= 60) {
                color = '#3b82f6';
                rating = 'Good';
                ratingClass = 'good';
            } else if (score >= 40) {
                color = '#f59e0b';
                rating = 'Fair';
                ratingClass = 'fair';
            } else {
                color = '#ef4444';
                rating = 'Needs Work';
                ratingClass = 'poor';
            }

            scoreCircle.style.stroke = color;
            scoreRating.textContent = rating;
            scoreRating.className = `score-rating ${ratingClass}`;

            // Display metrics
            const metricsContainer = document.getElementById('atsMetrics');
            metricsContainer.innerHTML = '';
            
            const metricNames = {
                contact: 'Contact Info',
                summary: 'Summary',
                experience: 'Experience',
                education: 'Education',
                skills: 'Skills',
                formatting: 'Format'
            };

            Object.keys(metrics).forEach(key => {
                const metric = metrics[key];
                const percentage = Math.round((metric.score / metric.max) * 100);
                
                let statusClass = 'good';
                if (percentage < 50) statusClass = 'error';
                else if (percentage < 75) statusClass = 'warning';

                const metricHTML = `
                    <div class="metric-item">
                        <span class="metric-label">${metricNames[key]}</span>
                        <span class="metric-value ${statusClass}">${metric.score}/${metric.max}</span>
                    </div>
                `;
                metricsContainer.innerHTML += metricHTML;
            });

            // Display suggestions
            const suggestionsContainer = document.getElementById('atsSuggestions');
            if (issues.length > 0) {
                let suggestionsHTML = '<h4><i class="fas fa-lightbulb"></i> Improvement Suggestions</h4><ul class="suggestion-list">';
                issues.forEach(issue => {
                    suggestionsHTML += `<li><i class="fas fa-exclamation-circle"></i>${issue}</li>`;
                });
                suggestionsHTML += '</ul>';
                suggestionsContainer.innerHTML = suggestionsHTML;
                suggestionsContainer.style.display = 'block';
            } else {
                suggestionsContainer.innerHTML = '<h4 style="color:#10b981;"><i class="fas fa-check-circle"></i> Your resume is ATS-optimized!</h4>';
                suggestionsContainer.style.display = 'block';
            }
        }

        // Auto-update ATS score when resume changes
        ['name', 'title', 'email', 'phone', 'summary'].forEach(id => {
            const elem = document.getElementById(id);
            if (elem) {
                elem.addEventListener('blur', () => {
                    if (document.getElementById('atsPanel').classList.contains('show')) {
                        calculateATSScore();
                    }
                });
            }
        });

        // ============ END ATS SCORE CHECKER SYSTEM ============
    </script>
    <!-- Resume Rank modal -->
    <div id="rankModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:9999; align-items:center; justify-content:center;">
        <div style="background:#fff; width:92%; max-width:980px; height:80vh; border-radius:12px; overflow:hidden; display:flex; flex-direction:column;">
            <div style="padding:12px 16px; display:flex; align-items:center; gap:12px; border-bottom:1px solid #eee">
                <strong style="font-size:16px">Check resume rank</strong>
                <div style="flex:1"></div>
                <label style="font-size:13px; color:#556; display:flex; align-items:center; gap:8px"><input id="rankDontShow" type="checkbox"> Don't show again</label>
                <button id="rankClose" class="btn" style="margin-left:12px; padding:6px 10px; background:#e6f7ff; color:#036; box-shadow:none">Close</button>
            </div>
            <div style="flex:1; display:flex;">
                <iframe id="rankFrame" src="/embed/ai_resume_ranker/" style="flex:1; border:none;" sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>
            </div>
            <div style="padding:12px 16px; border-top:1px solid #eee; display:flex; gap:8px; justify-content:flex-end; background:#fafafa">
                <a id="openRepoNew" href="https://github.com/Gajanan9960/ai_resume_ranker" target="_blank" class="btn">Open project on GitHub</a>
                <button id="rankClose2" class="btn" style="background:#ddd; color:#102">Close</button>
            </div>
        </div>
    </div>
    <script>
        // Intro modal behavior
        document.addEventListener('DOMContentLoaded', function () {
            const seen = localStorage.getItem('resume_builder_seen');
            const modal = document.getElementById('introModal');
            if (!modal) return;
            const closeBtn = document.getElementById('introCloseBtn');
            const dont = document.getElementById('dontShow');
            const help = document.getElementById('helpBtn');
            function openModal() { modal.style.display = 'flex'; }
            function closeModal() { if (dont.checked) localStorage.setItem('resume_builder_seen', '1'); modal.style.display = 'none'; }
            if (!seen) setTimeout(openModal, 300);
            closeBtn.addEventListener('click', closeModal);
            help.addEventListener('click', openModal);
        });

        // Rank modal behavior
        (function () {
            const modal = document.getElementById('rankModal');
            if (!modal) return;
            const close = document.getElementById('rankClose');
            const close2 = document.getElementById('rankClose2');
            const dont = document.getElementById('rankDontShow');
            function hideModal() {
                if (dont.checked) localStorage.setItem('resume_rank_dontshow', '1');
                modal.style.display = 'none';
            }
            close.addEventListener('click', hideModal);
            close2.addEventListener('click', hideModal);
            // expose showRankModal globally
            window.showRankModal = function () {
                if (localStorage.getItem('resume_rank_dontshow')) return;
                try { modal.style.display = 'flex'; document.getElementById('rankFrame').contentWindow.focus(); } catch (e) { modal.style.display = 'flex'; }
            }
        })();

        // ================== DRAG & DROP + CUSTOM SECTIONS ==================
        
        let draggedElement = null;
        let selectedSectionType = null;
        let customSectionCounter = 0;

        // Initialize drag and drop
        function initDragAndDrop() {
            const sections = document.querySelectorAll('.form-section[draggable="true"]');
            
            sections.forEach(section => {
                section.addEventListener('dragstart', handleDragStart);
                section.addEventListener('dragover', handleDragOver);
                section.addEventListener('drop', handleDrop);
                section.addEventListener('dragend', handleDragEnd);
                section.addEventListener('dragenter', handleDragEnter);
                section.addEventListener('dragleave', handleDragLeave);
            });
        }

        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.innerHTML);
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            if (this !== draggedElement) {
                this.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }

            if (draggedElement !== this) {
                const allSections = [...document.querySelectorAll('.form-section[draggable="true"]')];
                const draggedIndex = allSections.indexOf(draggedElement);
                const targetIndex = allSections.indexOf(this);

                if (draggedIndex < targetIndex) {
                    this.parentNode.insertBefore(draggedElement, this.nextSibling);
                } else {
                    this.parentNode.insertBefore(draggedElement, this);
                }
            }

            this.classList.remove('drag-over');
            return false;
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('drag-over');
            });
        }

        // Toggle section collapse
        function toggleSection(btn) {
            const section = btn.closest('.form-section');
            const content = section.querySelector('.section-content, #experiences, #educations, #skills');
            const icon = btn.querySelector('i');
            
            section.classList.toggle('collapsed');
            
            if (section.classList.contains('collapsed')) {
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            } else {
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            }
        }

        // Delete custom section
        function deleteCustomSection(btn) {
            if (confirm('Are you sure you want to remove this section?')) {
                btn.closest('.form-section').remove();
            }
        }

        // Custom section modal functions
        function openCustomSectionModal() {
            const modal = document.getElementById('customSectionModal');
            modal.classList.add('active');
            selectedSectionType = null;

            // Setup section type selection
            document.querySelectorAll('.section-type-option').forEach(option => {
                option.classList.remove('selected');
                option.onclick = function() {
                    document.querySelectorAll('.section-type-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedSectionType = this.dataset.sectionType;
                };
            });
        }

        function closeCustomSectionModal() {
            document.getElementById('customSectionModal').classList.remove('active');
            selectedSectionType = null;
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('customSectionModal');
            if (modal && e.target === modal) {
                closeCustomSectionModal();
            }
        });

        function addCustomSection() {
            if (!selectedSectionType) {
                alert('Please select a section type');
                return;
            }

            customSectionCounter++;
            const sectionId = `custom-${selectedSectionType}-${customSectionCounter}`;
            
            const sectionData = {
                projects: { icon: 'fa-code', title: 'Projects', placeholder: 'Project Name', descPlaceholder: ' Describe the project\n Technologies used\n Your role and contributions' },
                certifications: { icon: 'fa-certificate', title: 'Certifications', placeholder: 'Certification Name  Issuing Organization', descPlaceholder: 'Issue Date, Credential ID (Optional)' },
                awards: { icon: 'fa-trophy', title: 'Awards & Honors', placeholder: 'Award Name  Issuing Organization', descPlaceholder: 'Date received, Brief description' },
                publications: { icon: 'fa-book', title: 'Publications', placeholder: 'Publication Title', descPlaceholder: 'Authors, Publication venue, Date' },
                languages: { icon: 'fa-language', title: 'Languages', placeholder: 'Language  Proficiency Level', descPlaceholder: 'e.g., Spanish  Native, French  Professional Working' },
                volunteer: { icon: 'fa-hands-helping', title: 'Volunteer Experience', placeholder: 'Role  Organization', descPlaceholder: ' Describe your volunteer activities\n Impact and achievements' }
            };

            const data = sectionData[selectedSectionType];
            
            const sectionHTML = `
                <div class="form-section" draggable="true" data-section-id="${sectionId}">
                    <div class="form-section-header">
                        <div class="section-controls">
                            <button class="section-control-btn collapse-btn" onclick="toggleSection(this)" title="Collapse">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <button class="section-control-btn delete-btn-section" onclick="deleteCustomSection(this)" title="Delete section">
                                <i class="fas fa-times"></i>
                            </button>
                            <button class="section-control-btn drag-handle" title="Drag to reorder">
                                <i class="fas fa-grip-vertical"></i>
                            </button>
                        </div>
                        <div class="form-section-title">
                            <i class="fas ${data.icon}"></i> ${data.title}
                        </div>
                    </div>
                    <div class="section-content">
                        <div id="${sectionId}-items">
                            <div class="custom-item">
                                <input class="custom-title" type="text" placeholder="${data.placeholder}" />
                                <textarea class="custom-desc" placeholder="${data.descPlaceholder}"></textarea>
                                <button class="delete-btn" onclick="this.parentElement.remove()">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                        <div style="margin-top:12px;">
                            <span class="add-link" onclick="addCustomItem('${sectionId}', '${data.placeholder}', '${data.descPlaceholder}')">
                                <i class="fas fa-plus-circle"></i> Add ${data.title}
                            </span>
                        </div>
                    </div>
                </div>
            `;

            const controlsDiv = document.querySelector('.controls');
            controlsDiv.insertAdjacentHTML('beforebegin', sectionHTML);

            // Re-initialize drag and drop for new section
            initDragAndDrop();

            closeCustomSectionModal();
        }

        function addCustomItem(sectionId, placeholder, descPlaceholder) {
            const container = document.getElementById(`${sectionId}-items`);
            const itemHTML = `
                <div class="custom-item">
                    <input class="custom-title" type="text" placeholder="${placeholder}" />
                    <textarea class="custom-desc" placeholder="${descPlaceholder}"></textarea>
                    <button class="delete-btn" onclick="this.parentElement.remove()">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', itemHTML);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initDragAndDrop();
        });

        // ================== LINKEDIN IMPORT ==================
        
        function openLinkedInImport() {
            document.getElementById('linkedinModal').classList.add('active');
            document.getElementById('linkedinPasteArea').classList.remove('active');
            document.getElementById('linkedinDataInput').value = '';
        }

        function closeLinkedInImport() {
            document.getElementById('linkedinModal').classList.remove('active');
        }

        function showPasteArea() {
            document.getElementById('linkedinPasteArea').classList.add('active');
            setTimeout(() => {
                document.getElementById('linkedinDataInput').focus();
            }, 100);
        }

        function processLinkedInImport() {
            const linkedinData = document.getElementById('linkedinDataInput').value.trim();
            
            if (!linkedinData) {
                alert('Please paste your LinkedIn profile data first!');
                return;
            }

            // Parse LinkedIn data
            const lines = linkedinData.split('\n').map(line => line.trim()).filter(line => line);
            
            if (lines.length === 0) {
                alert('No data found. Please paste valid LinkedIn profile text.');
                return;
            }

            // Extract information using pattern matching
            let name = '', title = '', email = '', phone = '', location = '', linkedin = '', summary = '';
            let experiences = [], educations = [], skills = [];
            
            // Extract name (usually first line or line with full name pattern)
            name = lines[0] || '';
            
            // Extract title/headline (usually after name)
            if (lines.length > 1) {
                title = lines[1] || '';
            }

            // Extract location (look for city/state patterns)
            for (let i = 0; i < Math.min(10, lines.length); i++) {
                if (lines[i].match(/,\s*[A-Z]{2}/) || lines[i].match(/\d{5}/) || 
                    lines[i].toLowerCase().includes('area') || lines[i].toLowerCase().includes('location')) {
                    location = lines[i].replace(/location[:\s]*/gi, '').trim();
                    break;
                }
            }

            // Extract email (look for email pattern)
            for (let line of lines) {
                const emailMatch = line.match(/[\w.-]+@[\w.-]+\.\w+/);
                if (emailMatch) {
                    email = emailMatch[0];
                    break;
                }
            }

            // Extract phone (look for phone patterns)
            for (let line of lines) {
                const phoneMatch = line.match(/(\+?\d{1,3}[-.\s]?)?\(?\d{3}\)?[-.\s]?\d{3}[-.\s]?\d{4}/);
                if (phoneMatch) {
                    phone = phoneMatch[0];
                    break;
                }
            }

            // Extract LinkedIn URL
            for (let line of lines) {
                if (line.toLowerCase().includes('linkedin.com/in/')) {
                    linkedin = line;
                    break;
                }
            }

            // Extract summary/about (look for "About", "Summary" sections)
            let summaryStart = -1;
            let experienceStart = -1;
            
            for (let i = 0; i < lines.length; i++) {
                const lowerLine = lines[i].toLowerCase();
                if ((lowerLine === 'about' || lowerLine === 'summary' || lowerLine.includes('about me')) && summaryStart === -1) {
                    summaryStart = i;
                }
                if ((lowerLine === 'experience' || lowerLine === 'work experience') && experienceStart === -1) {
                    experienceStart = i;
                    break;
                }
            }

            if (summaryStart !== -1 && experienceStart !== -1) {
                summary = lines.slice(summaryStart + 1, experienceStart).join(' ').substring(0, 500);
            }

            // Extract experiences (look for date patterns and company names)
            let educationStart = -1;
            for (let i = 0; i < lines.length; i++) {
                if (lines[i].toLowerCase() === 'education') {
                    educationStart = i;
                    break;
                }
            }

            if (experienceStart !== -1) {
                const expEnd = educationStart !== -1 ? educationStart : lines.length;
                const expLines = lines.slice(experienceStart + 1, expEnd);
                
                let currentExp = null;
                for (let line of expLines) {
                    // Date pattern (e.g., "2020 - Present", "Jan 2020 - Dec 2022")
                    if (line.match(/\d{4}/) || line.match(/(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i)) {
                        if (currentExp && currentExp.role) {
                            experiences.push(currentExp);
                        }
                        currentExp = { role: '', dates: line, desc: '' };
                    } else if (currentExp && !currentExp.role && line.length > 3) {
                        currentExp.role = line;
                    } else if (currentExp && currentExp.role && line.length > 10) {
                        currentExp.desc += (currentExp.desc ? '\n' : '') + ' ' + line;
                    }
                }
                if (currentExp && currentExp.role) {
                    experiences.push(currentExp);
                }
            }

            // Extract education
            if (educationStart !== -1) {
                const eduLines = lines.slice(educationStart + 1, Math.min(educationStart + 20, lines.length));
                
                let currentEdu = null;
                for (let line of eduLines) {
                    if (line.match(/\d{4}/) || line.match(/graduated|graduation/i)) {
                        if (currentEdu && currentEdu.role) {
                            educations.push(currentEdu);
                        }
                        currentEdu = { role: '', dates: line.match(/\d{4}/)?.[0] || line, desc: '' };
                    } else if (currentEdu && !currentEdu.role && line.length > 3) {
                        currentEdu.role = line;
                    } else if (currentEdu && currentEdu.role && line.length > 5) {
                        currentEdu.desc = line;
                    }
                    if (line.toLowerCase() === 'skills' || line.toLowerCase() === 'licenses') break;
                }
                if (currentEdu && currentEdu.role) {
                    educations.push(currentEdu);
                }
            }

            // Extract skills (look for "Skills" section)
            let skillsStart = -1;
            for (let i = 0; i < lines.length; i++) {
                if (lines[i].toLowerCase() === 'skills' || lines[i].toLowerCase() === 'skills & expertise') {
                    skillsStart = i;
                    break;
                }
            }

            if (skillsStart !== -1) {
                const skillLines = lines.slice(skillsStart + 1, Math.min(skillsStart + 30, lines.length));
                for (let line of skillLines) {
                    if (line.length < 50 && !line.match(/\d{4}/) && 
                        !line.toLowerCase().includes('experience') && 
                        !line.toLowerCase().includes('education')) {
                        // Split by common delimiters
                        const skillsParts = line.split(/[,;|]/);
                        for (let skill of skillsParts) {
                            const cleanSkill = skill.trim();
                            if (cleanSkill.length > 2 && cleanSkill.length < 40) {
                                skills.push(cleanSkill);
                            }
                        }
                    }
                    if (line.toLowerCase().includes('recommendations') || 
                        line.toLowerCase().includes('accomplishments')) break;
                }
            }

            // Populate form fields
            if (name) document.getElementById('name').value = name;
            if (title) document.getElementById('title').value = title;
            if (email) document.getElementById('email').value = email;
            if (phone) document.getElementById('phone').value = phone;
            if (location) document.getElementById('location').value = location;
            if (linkedin) document.getElementById('linkedin').value = linkedin;
            if (summary) document.getElementById('summary').value = summary;

            // Clear existing experiences and add new ones
            const expContainer = document.getElementById('experiences');
            expContainer.innerHTML = '';
            experiences.slice(0, 5).forEach((exp, index) => {
                addExperience();
                const expItems = document.querySelectorAll('.exp-item');
                const lastItem = expItems[expItems.length - 1];
                if (lastItem) {
                    lastItem.querySelector('.exp-role').value = exp.role;
                    lastItem.querySelector('.exp-dates').value = exp.dates;
                    lastItem.querySelector('.exp-desc').value = exp.desc;
                }
            });

            // Clear existing educations and add new ones
            const eduContainer = document.getElementById('educations');
            eduContainer.innerHTML = '';
            educations.slice(0, 3).forEach((edu, index) => {
                addEducation();
                const eduItems = document.querySelectorAll('.edu-item');
                const lastItem = eduItems[eduItems.length - 1];
                if (lastItem) {
                    lastItem.querySelector('.edu-role').value = edu.role;
                    lastItem.querySelector('.edu-dates').value = edu.dates;
                    if (edu.desc) lastItem.querySelector('.edu-desc').value = edu.desc;
                }
            });

            // Add skills
            document.getElementById('skills').innerHTML = '';
            skills.slice(0, 15).forEach(skill => {
                const chip = document.createElement('span');
                chip.className = 'chip';
                chip.innerHTML = skill + ' <i class="fas fa-times" onclick="this.parentElement.remove()"></i>';
                document.getElementById('skills').appendChild(chip);
            });

            // Close modal and show success message
            closeLinkedInImport();
            
            // Auto-generate preview
            setTimeout(() => {
                generateResume();
            }, 500);

            // Show success notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                color: white;
                padding: 20px 30px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(16, 185, 129, 0.4);
                z-index: 10003;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 12px;
                animation: slideIn 0.4s ease;
            `;
            notification.innerHTML = `
                <i class="fas fa-check-circle" style="font-size: 24px;"></i>
                <span>LinkedIn data imported successfully!</span>
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.4s ease';
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('linkedinModal');
            if (modal && e.target === modal) {
                closeLinkedInImport();
            }
        });

        // ================== RESUME MANAGEMENT ==================
        
        let savedResumes = [];

        function loadSavedResumes() {
            const stored = localStorage.getItem('saved_resumes');
            savedResumes = stored ? JSON.parse(stored) : [];
            updateResumeCount();
        }

        function updateResumeCount() {
            const badge = document.getElementById('resumeCountBadge');
            if (badge) {
                badge.textContent = savedResumes.length;
            }
        }

        function openResumeManagement() {
            document.getElementById('resumeManagementModal').classList.add('active');
            displayResumeList();
        }

        function closeResumeManagement() {
            document.getElementById('resumeManagementModal').classList.remove('active');
        }

        function saveNewResume() {
            const resumeName = prompt('Enter a name for this resume:', 'Resume ' + (savedResumes.length + 1));
            
            if (!resumeName) return;

            const resumeData = {
                id: Date.now(),
                name: resumeName,
                template: currentTemplate,
                theme: currentTheme,
                data: {
                    name: document.getElementById('name').value,
                    title: document.getElementById('title').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    location: document.getElementById('location').value,
                    linkedin: document.getElementById('linkedin').value,
                    summary: document.getElementById('summary').value,
                    experiences: collectItems('.exp-role', '.exp-dates', '.exp-desc'),
                    educations: collectItems('.edu-role', '.edu-dates', '.edu-desc'),
                    skills: Array.from(document.querySelectorAll('#skills .chip')).map(s => s.textContent.replace('', '').trim())
                },
                savedAt: new Date().toISOString(),
                lastModified: new Date().toISOString()
            };

            savedResumes.push(resumeData);
            localStorage.setItem('saved_resumes', JSON.stringify(savedResumes));
            
            updateResumeCount();
            displayResumeList();

            showNotification('Resume saved successfully!', 'success');
        }

        function displayResumeList() {
            const container = document.getElementById('resumeListContainer');
            
            if (savedResumes.length === 0) {
                container.innerHTML = `
                    <div class="no-resumes">
                        <i class="fas fa-folder-open"></i>
                        <p>No saved resumes yet. Save your current resume to get started!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = '<div class="resume-list">' + savedResumes.map(resume => {
                const savedDate = new Date(resume.savedAt);
                const dateStr = savedDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
                const timeStr = savedDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
                
                return `
                    <div class="resume-item" data-resume-id="${resume.id}">
                        <div class="resume-item-header">
                            <div class="resume-item-title">
                                <i class="fas fa-file-alt"></i>
                                ${resume.name}
                            </div>
                            <div class="resume-item-actions">
                                <button class="resume-action-btn load" onclick="loadResume(${resume.id})" title="Load Resume">
                                    <i class="fas fa-upload"></i>
                                </button>
                                <button class="resume-action-btn rename" onclick="renameResume(${resume.id})" title="Rename">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="resume-action-btn delete" onclick="deleteResume(${resume.id})" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="resume-item-info">
                            <span><i class="fas fa-palette"></i> ${resume.template}</span>
                            <span><i class="fas fa-clock"></i> ${dateStr} at ${timeStr}</span>
                        </div>
                    </div>
                `;
            }).join('') + '</div>';
        }

        function loadResume(resumeId) {
            const resume = savedResumes.find(r => r.id === resumeId);
            if (!resume) return;

            if (!confirm(`Load "${resume.name}"? This will replace your current resume data.`)) {
                return;
            }

            // Load template and theme
            currentTemplate = resume.template;
            currentTheme = resume.theme || 'purple';
            applyTheme(currentTheme);
            
            // Update template selector
            document.querySelectorAll('.template-option').forEach(opt => {
                opt.classList.remove('active');
                if (opt.dataset.template === currentTemplate) {
                    opt.classList.add('active');
                }
            });

            // Load personal info
            const data = resume.data;
            document.getElementById('name').value = data.name || '';
            document.getElementById('title').value = data.title || '';
            document.getElementById('email').value = data.email || '';
            document.getElementById('phone').value = data.phone || '';
            document.getElementById('location').value = data.location || '';
            document.getElementById('linkedin').value = data.linkedin || '';
            document.getElementById('summary').value = data.summary || '';

            // Load experiences
            const expContainer = document.getElementById('experiences');
            expContainer.innerHTML = '';
            if (data.experiences && data.experiences.length > 0) {
                data.experiences.forEach(exp => {
                    addExperience();
                    const expItems = document.querySelectorAll('.exp-item');
                    const lastItem = expItems[expItems.length - 1];
                    if (lastItem) {
                        lastItem.querySelector('.exp-role').value = exp.role;
                        lastItem.querySelector('.exp-dates').value = exp.dates;
                        lastItem.querySelector('.exp-desc').value = exp.desc;
                    }
                });
            } else {
                addExperience();
            }

            // Load educations
            const eduContainer = document.getElementById('educations');
            eduContainer.innerHTML = '';
            if (data.educations && data.educations.length > 0) {
                data.educations.forEach(edu => {
                    addEducation();
                    const eduItems = document.querySelectorAll('.edu-item');
                    const lastItem = eduItems[eduItems.length - 1];
                    if (lastItem) {
                        lastItem.querySelector('.edu-role').value = edu.role;
                        lastItem.querySelector('.edu-dates').value = edu.dates;
                        lastItem.querySelector('.edu-desc').value = edu.desc;
                    }
                });
            } else {
                addEducation();
            }

            // Load skills
            document.getElementById('skills').innerHTML = '';
            if (data.skills && data.skills.length > 0) {
                data.skills.forEach(skill => {
                    if (skill) {
                        const chip = document.createElement('span');
                        chip.className = 'chip';
                        chip.innerHTML = skill + ' <i class="fas fa-times" onclick="this.parentElement.remove()"></i>';
                        document.getElementById('skills').appendChild(chip);
                    }
                });
            }

            closeResumeManagement();
            generateResume();
            showNotification(`Loaded "${resume.name}" successfully!`, 'success');
        }

        function renameResume(resumeId) {
            const resume = savedResumes.find(r => r.id === resumeId);
            if (!resume) return;

            const newName = prompt('Enter new name:', resume.name);
            if (!newName || newName === resume.name) return;

            resume.name = newName;
            resume.lastModified = new Date().toISOString();
            localStorage.setItem('saved_resumes', JSON.stringify(savedResumes));
            
            displayResumeList();
            showNotification('Resume renamed successfully!', 'success');
        }

        function deleteResume(resumeId) {
            const resume = savedResumes.find(r => r.id === resumeId);
            if (!resume) return;

            if (!confirm(`Delete "${resume.name}"? This action cannot be undone.`)) {
                return;
            }

            savedResumes = savedResumes.filter(r => r.id !== resumeId);
            localStorage.setItem('saved_resumes', JSON.stringify(savedResumes));
            
            updateResumeCount();
            displayResumeList();
            showNotification('Resume deleted successfully!', 'warning');
        }

        function showNotification(message, type = 'success') {
            const colors = {
                success: { bg: 'linear-gradient(135deg, #10b981 0%, #059669 100%)', icon: 'fa-check-circle' },
                warning: { bg: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)', icon: 'fa-exclamation-circle' },
                error: { bg: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)', icon: 'fa-times-circle' }
            };

            const color = colors[type] || colors.success;

            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${color.bg};
                color: white;
                padding: 20px 30px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                z-index: 10004;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 12px;
                animation: slideIn 0.4s ease;
            `;
            notification.innerHTML = `
                <i class="fas ${color.icon}" style="font-size: 24px;"></i>
                <span>${message}</span>
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.4s ease';
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('resumeManagementModal');
            if (modal && e.target === modal) {
                closeResumeManagement();
            }
        });

        // Load saved resumes on page load
        loadSavedResumes();

        // ================== COVER LETTER GENERATOR ==================
        
        let selectedCoverStyle = 'professional';
        let generatedCoverLetter = '';

        function openCoverLetterGenerator() {
            document.getElementById('coverLetterModal').classList.add('active');
            // Auto-fill from resume data
            const name = document.getElementById('name').value;
            if (name) {
                // Pre-populate if resume data exists
                document.getElementById('coverJobTitle').value = document.getElementById('title').value || '';
            }
        }

        function closeCoverLetterGenerator() {
            document.getElementById('coverLetterModal').classList.remove('active');
        }

        function selectCoverStyle(style) {
            selectedCoverStyle = style;
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
                if (card.dataset.style === style) {
                    card.classList.add('selected');
                }
            });
        }

        function extractSkillsFromResume() {
            const skills = Array.from(document.querySelectorAll('#skills .chip'))
                .map(s => s.textContent.replace('', '').trim());
            
            if (skills.length > 0) {
                document.getElementById('coverKeySkills').value = skills.join(', ');
                showNotification('Skills extracted from resume!', 'success');
            } else {
                showNotification('No skills found in resume. Please add skills first.', 'warning');
            }
        }

        function generateCoverLetter(event) {
            event.preventDefault();

            const name = document.getElementById('name').value || 'Your Name';
            const email = document.getElementById('email').value || 'your.email@example.com';
            const phone = document.getElementById('phone').value || '(555) 123-4567';
            const location = document.getElementById('location').value || 'Your City, State';
            
            const companyName = document.getElementById('coverCompanyName').value;
            const hiringManager = document.getElementById('coverHiringManager').value;
            const jobTitle = document.getElementById('coverJobTitle').value;
            const companyLocation = document.getElementById('coverCompanyLocation').value;
            const keySkills = document.getElementById('coverKeySkills').value;
            const achievements = document.getElementById('coverAchievements').value;
            const whyCompany = document.getElementById('coverWhyCompany').value;

            if (!companyName || !jobTitle) {
                alert('Please fill in Company Name and Job Title');
                return;
            }

            const today = new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });

            // Generate cover letter based on style
            let coverLetter = '';

            // Header
            coverLetter += `${name}\n`;
            coverLetter += `${email} | ${phone} | ${location}\n`;
            coverLetter += `\n${today}\n\n`;
            
            if (hiringManager) {
                coverLetter += `${hiringManager}\n`;
            }
            if (companyLocation) {
                coverLetter += `${companyName}\n${companyLocation}\n\n`;
            } else {
                coverLetter += `${companyName}\n\n`;
            }

            // Salutation
            if (hiringManager) {
                coverLetter += `Dear ${hiringManager},\n\n`;
            } else {
                coverLetter += `Dear Hiring Manager,\n\n`;
            }

            // Opening paragraph - varies by style
            if (selectedCoverStyle === 'professional') {
                coverLetter += `I am writing to express my strong interest in the ${jobTitle} position at ${companyName}. With my proven expertise in ${keySkills || 'relevant technologies'} and a track record of delivering high-quality results, I am confident in my ability to contribute effectively to your team.\n\n`;
            } else if (selectedCoverStyle === 'creative') {
                coverLetter += `Imagine a ${jobTitle} who doesn't just write code, but crafts solutions that transform user experiences. That's exactly what I bring to ${companyName}. My passion for ${keySkills || 'innovative technology'} and creative problem-solving makes me an ideal fit for this role.\n\n`;
            } else if (selectedCoverStyle === 'enthusiastic') {
                coverLetter += `I am thrilled to apply for the ${jobTitle} position at ${companyName}! Your company's innovative approach and commitment to excellence perfectly align with my professional goals and values. I am excited about the opportunity to contribute my skills in ${keySkills || 'technology and development'} to your dynamic team.\n\n`;
            }

            // Body - achievements
            if (achievements) {
                coverLetter += `Throughout my career, I have achieved significant milestones that demonstrate my capabilities:\n\n`;
                const achievementLines = achievements.split('\n').filter(line => line.trim());
                achievementLines.forEach(achievement => {
                    if (!achievement.trim().startsWith('')) {
                        coverLetter += ` ${achievement.trim()}\n`;
                    } else {
                        coverLetter += `${achievement.trim()}\n`;
                    }
                });
                coverLetter += `\n`;
            }

            // Why this company
            if (whyCompany) {
                coverLetter += `I am particularly drawn to ${companyName} because ${whyCompany.trim()}. This alignment of values and vision motivates me to contribute meaningfully to your organization's continued success.\n\n`;
            }

            // Skills paragraph
            if (keySkills) {
                const skillsArray = keySkills.split(',').map(s => s.trim());
                if (skillsArray.length > 0) {
                    coverLetter += `My technical expertise includes ${skillsArray.slice(0, -1).join(', ')}`;
                    if (skillsArray.length > 1) {
                        coverLetter += `, and ${skillsArray[skillsArray.length - 1]}`;
                    }
                    coverLetter += `. I am committed to staying current with industry trends and continuously expanding my skill set to deliver innovative solutions.\n\n`;
                }
            }

            // Closing paragraph - varies by style
            if (selectedCoverStyle === 'professional') {
                coverLetter += `I would welcome the opportunity to discuss how my background, skills, and enthusiasm align with the needs of ${companyName}. Thank you for considering my application. I look forward to the possibility of contributing to your team's success.\n\n`;
            } else if (selectedCoverStyle === 'creative') {
                coverLetter += `Let's create something amazing together. I'd love to discuss how my unique perspective and technical skills can help ${companyName} reach new heights. Thank you for your consideration, and I'm excited about the possibility of joining your innovative team.\n\n`;
            } else if (selectedCoverStyle === 'enthusiastic') {
                coverLetter += `I am genuinely excited about the opportunity to bring my passion and expertise to ${companyName}. I would be thrilled to discuss how I can contribute to your team's continued success. Thank you so much for your time and consideration!\n\n`;
            }

            // Signature
            coverLetter += `Sincerely,\n${name}`;

            // Display the cover letter
            generatedCoverLetter = coverLetter;
            document.getElementById('coverLetterText').textContent = coverLetter;
            document.getElementById('coverLetterPreview').classList.add('active');

            // Scroll to preview
            document.getElementById('coverLetterPreview').scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            showNotification('Cover letter generated successfully!', 'success');
        }

        function copyCoverLetter() {
            navigator.clipboard.writeText(generatedCoverLetter).then(() => {
                showNotification('Cover letter copied to clipboard!', 'success');
            }).catch(() => {
                // Fallback method
                const textArea = document.createElement('textarea');
                textArea.value = generatedCoverLetter;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('Cover letter copied to clipboard!', 'success');
            });
        }

        function downloadCoverLetter() {
            const blob = new Blob([generatedCoverLetter], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const companyName = document.getElementById('coverCompanyName').value.replace(/\s+/g, '_');
            const jobTitle = document.getElementById('coverJobTitle').value.replace(/\s+/g, '_');
            a.download = `CoverLetter_${companyName}_${jobTitle}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showNotification('Cover letter downloaded!', 'success');
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('coverLetterModal');
            if (modal && e.target === modal) {
                closeCoverLetterGenerator();
            }
        });

    </script>
</body>

</html>